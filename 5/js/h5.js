/* Copyright (C) 2012-2014 NS Solutions Corporation. Licensed under the Apache License, Version 2.0. hifive version Nightly_2015-07-22_16-16-25-984 gitCommitId 70ed0ba77d8da5774f7ebde2f903bdd6a1f4b67a (scopedglobals,util,async,resource,controller,dataModel,view,modelWithBinding,ui,api.geo,api.sqldb,api.storage,scene) */
(function(a){var ha,Oa,sa;function e(a,e,r){var o=null,C=Ea[a],f=yb[a];f&&(o=f(a,C,e,r));!o&&C&&(o=c.u.str.format.apply(null,[C].concat(e)));o&&(o+="(code="+a+")");e=o?Error(o):Error("FwError: code = "+a);a&&(e.code=a);r&&(e.detail=r);throw e;}function zb(a){for(var c in a)a.hasOwnProperty(c)&&(Ea[c]=a[c])}function S(a,e,r){var o=null,C=Ea[a];C&&(e=[C].concat(e),o=c.u.str.format.apply(null,e));return{code:a,message:o,detail:r}}function P(a){return null==a?a:F(a)?a:[a]}function v(a){return"string"===
typeof a}function La(a){return a.isRejected?a.isRejected():"rejected"===a.state()}function va(a){return a.isResolved?a.isResolved():"resolved"===a.state()}function ka(a){return!v(a)?!1:!!a.match(/^[A-Za-z_\$][\w|\$]*$/)}function pa(k){if("regexp"===a.type(k))return k;var c="",c=-1!==k.indexOf("*")?a.map(k.split("*"),function(a){return a.replace(/\W/g,"\\$&")}).join(".*"):k;return RegExp("^"+c+"$")}function qa(a,c,e){a&&(a._h5UnwrappedCall?a._h5UnwrappedCall(c,e):a[c](e))}function Z(k,c,e,o){return k[a.hasOwnProperty("curCSS")?
"pipe":"then"](c,e,o)}function ob(a){return a&&a.document&&a.document.nodeType===Ta&&Q(a.document)===a}function N(a){return typeof a.nodeType===la?ob(a)?a.document:null:a.nodeType===Ta?a:a.ownerDocument}function Q(a){return window.document===a?window:a.defaultView||a.parentWindow}function Fa(e,y,r,o){function C(g){return function(){if(!n._rejected){var h=c.u.obj.argsToArray(arguments),d=a.inArray(g,e);B[d]=2>h.length?h[0]:h;++n._resolveCount===n._promisesLength&&n._doneCallbackExecuter()}}}var f=
e?e.length:0,i=c.async.isPromise,n=this,B=null;this._doneCallbackExecuter=function(){n._resolved=!0;y&&(B?y.call(this,B):y.apply(this,arguments))};this._failCallbackExecuter=function(){n._rejected=!0;r?r.apply(this,arguments):o&&c.settings.commonFailHandler&&c.settings.commonFailHandler.call(this,arguments)};if(1===f||i(e)){var x=1===f?e[0]:e;i(x)?(this.remove=function(a){!this._resolved&&!this._rejected&&x===a&&this._doneCallbackExecuter()},x.done(this._doneCallbackExecuter),x.fail(this._failCallbackExecuter)):
this._doneCallbackExecuter()}else{for(var f=[],g=0,p=e.length;g<p;g++){var t=e[g];i(t)&&f.push(t)}i=f.length;if(0===i)this._resolved=!0,y&&y();else{this._promises=f;B=[];this._resolveArgs=[];this._resolveCount=0;this._promisesLength=i;for(g=0;g<i;g++)p=f[g],p.done(C(p)).fail(this._failCallbackExecuter)}}}function ba(a,e,c,o){return new Fa(a,e,c,o)}var Ua=void 0;if(window.h5){if(window.h5.env&&"Nightly_2015-07-22_16-16-25-984"===window.h5.env.version)return;Ua=window.h5}var c={};window.h5=c;c.coexist=
function(){window.h5=Ua;return c};c.env={version:"Nightly_2015-07-22_16-16-25-984"};var Ea={},yb={},pb=12029,la="undefined",X=1,Ta=9,ia=function(){var a=null,e=null,c=null;return function(o){a||(a=document.createElement("a"));null===c&&(a.setAttribute("href","./"),c="./"!==a.href);if(c)return a.setAttribute("href",o),a.href;e||(e=document.createElement("span"));e.innerHTML='<a href="'+o+'" />';return e.firstChild.href}}();parseHTML=a.parseHTML?a.parseHTML:function(e,c,r){if(!e||!v(e))return null;
"boolean"===typeof c&&(r=c,c=!1);c=c||document;e=a("<div>"+e+"</div>",c);r||e.find("script").remove();for(var r=e[0].childNodes,c=c.createDocumentFragment(),e=0,o=r.length;e<o;e++)c.appendChild(r[e]);return c.childNodes};var F=Array.isArray||function(){var a=Object.prototype.toString;return function(e){return"[object Array]"===a.call(e)}}(),I=function(){if("function"===typeof RegExp()){var a=Object.prototype.toString;return function(e){return"[object Function]"===a.call(e)}}return function(a){return"function"===
typeof a}}();Fa.prototype=a.extend(Fa.prototype,{remove:function(e){if(!this._resolved&&!this._rejected)if(promsie===this._promises)this._doneCallback&&doneCallback(),this._resolved=!0;else{var c=a.inArray(e,this._promises);-1!==c&&(this._promises.splice(c,1),this._resolveArgs.splice(c,1),va(e)||(this._promisesLength--,that._resolveCount===this._promisesLength&&this._doneCallbackExecuter()))}}});ha={controllerInternal:null};sa=Oa=void 0;(function(){function k(a){switch(a){case "string":return"s";
case "number":return"n";case "boolean":return"b";case "String":return"S";case "Number":return"N";case "Boolean":return"B";case "infinity":return"i";case "-infinity":return"I";case "nan":return"x";case "date":return"d";case "regexp":return"r";case "array":return"a";case "object":return"o";case "null":return"l";case x:return"u";case "undefElem":return"_";case "objElem":return"@"}}function y(a,d){if(v(a)){var b=a;d&&(b=b.replace(/\\n/g,"\n").replace(/\\r/g,"\r"));return b=b.replace(/\\/g,"\\\\").replace(/\n/g,
"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}return a instanceof String?new String(y(a.toString())):a}function r(a,b){return"1"===b?a:v(a)?a.replace(/\\\\/g,"\\-").replace(/\\b/g,"").replace(/\\f/g,"").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\-/g,"\\"):a instanceof String?new String(r(a.toString())):a}function o(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function C(a,b,d){var g=c.async.deferred();c.ajax({url:a,
async:b,cache:d,dataType:"script",converters:{"text script":function(a){return a}}}).done(function(){var a=B(arguments);a.push(this.url);g.notifyWith(g,a);g.resolveWith(g,a)}).fail(function(){g.rejectWith(g,B(arguments))});return g.promise()}function f(a){v(a)||e(g,"h5.u.obj.ns()");for(var a=a.split("."),b=a.length,d=0;d<b;d++)ka(a[d])||e(g,"h5.u.obj.ns()");for(var j=window,d=0;d<b;d++){var h=a[d];typeof j[h]===x&&(j[h]={});j=j[h]}return j}function i(a,d){var b=f(a),g;for(g in d)d.hasOwnProperty(g)&&
(void 0!==b[g]&&e(p,[a,g]),b[g]=d[g])}function n(d){return!d||!d.jquery?!1:d.jquery===a().jquery}function B(a){return Array.prototype.slice.call(a)}var x="undefined",g=11E3,p=11001,t=11004,A=11005,h=11006,d={},b={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;","'":"&#39;"},j=void 0!==document.createElement("script").onload,m=-1===/\r\n/.toString().indexOf("\r\n");i("h5.u",{loadScript:function(b,g){var h=c.async.deferred,G=P(b);(!G||0===G.length)&&e(11007);for(var m=0,f=G.length;m<f;m++)b=G[m],(!v(b)||
!a.trim(b))&&e(11007);null!=g&&!a.isPlainObject(g)&&e(11008,"h5.u.loadScript()");var ea=g&&!1===g.async?!1:!0,p=!!(g&&!0===g.force),m=!!(g&&!0===g.parallel),i=!!(g&&!0===g.atomic),o=!p,k=ea?h():null,n=ea?function(a){k.reject(S(11010,[a]))}:null,f=ea?function(){var a=h();setTimeout(function(){a.resolve([])},0);return a.promise()}:null,t=m?[]:null,r=[],A={};if(ea){if(!i&&j){var x=a("head"),y=function(a){var b=h(),g=document.createElement("script");g.onload=function(){g.onload=null;d[a]=a;b.resolve()};
g.onerror=function(){g.onerror=null;b.reject(a)};g.type="text/javascript";g.src=o?a:a+(-1<a.indexOf("?")?"&_":"?_")+ +new Date;x[0].appendChild(g);return b.promise()};if(m)t.push(f()),a.each(G,function(){var a=ia(this.toString());if(!p&&a in d)return!0;t.push(y(a))}),ba(t,function(){k.resolve()},n);else{var w=Z(h().resolve(),f);a.each(G,function(){var a=ia(this.toString());w=Z(w,function(){if(p||!(a in d))return y(a)},n)});Z(w,function(){k.resolve()},n)}}else if(m){var M=[];t.push(f());M.push(null);
a.each(G,function(){var a=ia(this.toString());if(!p&&(a in d||a in A))return!0;t.push(C(a,ea,o));i?A[a]=a:M.push(null)});m=G=null;i?(G=function(){a.each(B(arguments),function(b,d){a.globalEval(d[0])});a.extend(d,A);k.resolve()},m=a.noop):(G=function(){k.resolve()},m=function(){for(var b=B(arguments),d=0;d<M.length;d++)if(b[d]){var g=b[d][3];M[d]!==g&&(a.globalEval(b[d][0]),M.splice(d,1,g))}});c.async.when(t).done(G).fail(n).progress(m)}else w=Z(h().resolve(),f),a.each(G,function(){var b=ia(this.toString());
w=Z(w,function(){var g=h();!p&&(b in d||b in A)?g.resolve():C(b,ea,o).done(function(h){i?(r.push(h),A[b]=b):(a.globalEval(h),d[b]=b);g.resolve()}).fail(function(){g.reject(this.url)});return g.promise()},n)}),Z(w,function(){i&&(a.each(r,function(b,d){a.globalEval(d)}),a.extend(d,A));k.resolve()},n);return k.promise()}a.each(G,function(){var b=ia(this.toString());if(!p&&(b in d||b in A))return!0;C(b,ea,o).done(function(g){i?(r.push(g),A[b]=b):(a.globalEval(g),d[b]=b)}).fail(function(){e(11010,[b])})});
i&&(a.each(r,function(b,d){a.globalEval(d)}),a.extend(d,A))},createInterceptor:function(a,b){return function(d){var g={},h=a?a.call(this,d,g):d.proceed();d.result=h;if(!b)return h;if(h&&I(h.promise)&&!n(h)){var j=this;qa(h,"always",function(){b.call(j,d,g)});return h}b.call(this,d,g);return h}}});i("h5.u.str",{startsWith:function(a,b){return 0===a.lastIndexOf(b,0)},endsWith:function(a,b){var d=a.length-b.length;return 0<=d&&a.lastIndexOf(b)===d},format:function(a,b){if(null==a)return"";var d=arguments;
return a.replace(/\{(\d+)\}/g,function(a,b){var g=d[parseInt(b,10)+1];return typeof g===x?x:g})},escapeHtml:function(d){return"string"!==a.type(d)?d:d.replace(/[&"'<>]/g,function(a){return b[a]})}});i("h5.u.obj",{expose:i,ns:f,serialize:function(b){function d(a){for(var b=0,g=j.length;b<g;b++)if(a===j[b])return!0;return!1}function g(a){for(var b=0,d=j.length;b<d;b++)a===j[b]&&j.splice(b,1)}function h(b){var c=b,f=a.type(b);"object"===typeof b&&(b instanceof String?f="String":b instanceof Number?f=
"Number":b instanceof Boolean&&(f="Boolean"));switch(f){case "String":case "string":c=k(f)+y(c);break;case "Boolean":c=c.valueOf();case "boolean":c=k(f)+(c?1:0);break;case "Number":c=c.valueOf();if(a.isNaN&&a.isNaN(b)||a.isNumeric&&!a.isNumeric(b))c=Infinity===b.valueOf()?k("infinity"):-Infinity===b.valueOf()?k("-infinity"):k("nan");c=k(f)+c;break;case "number":c=a.isNaN&&a.isNaN(b)||a.isNumeric&&!a.isNumeric(b)?Infinity===b?k("infinity"):-Infinity===b?k("-infinity"):k("nan"):k(f)+c;break;case "regexp":c=
k(f)+y(c.toString(),m);break;case "date":c=k(f)+ +c;break;case "array":d(b)&&e(ERR_CODE_REFERENCE_CYCLE);j.push(b);for(var p=[],c=k(f)+"[",f=0,i=b.length;f<i;f++){p[f.toString()]=!0;var n;n=b.hasOwnProperty(f)?"function"===a.type(b[f])?k(x):o(h(b[f])):k("undefElem");c+='"'+n+'"';f!==b.length-1&&(c+=",")}var f="",t;for(t in b)p[t]||"function"!==a.type(b[t])&&(f+='"'+o(y(t))+'":"'+o(h(b[t]))+'",');f&&(c+=(b.length?",":"")+'"'+k("objElem")+"{"+o(f),c=c.replace(/,$/,""),c+='}"');c+="]";g(b);break;case "object":d(b)&&
e(A);j.push(b);c=k(f)+"{";for(t in b)b.hasOwnProperty(t)&&"function"!==a.type(b[t])&&(c+='"'+o(y(t))+'":"'+o(h(b[t]))+'",');c=c.replace(/,$/,"");c+="}";g(b);break;case "null":case x:c=k(f)}return c}I(b)&&e(11002);var j=[];return"2|"+h(b)},deserialize:function(b){function d(b){function j(a){switch(a){case "s":return"string";case "n":return"number";case "b":return"boolean";case "S":return"String";case "N":return"Number";case "B":return"Boolean";case "i":return"infinity";case "I":return"-infinity";case "x":return"nan";
case "d":return"date";case "r":return"regexp";case "a":return"array";case "o":return"object";case "l":return"null";case "u":return x;case "_":return"undefElem";case "@":return"objElem"}}b.match(/^(.)(.*)/);b=RegExp.$1;c=RegExp.$2?RegExp.$2:"";if(void 0!==b&&""!==b)switch(j(b)){case "String":c=new String(r(c,g));break;case "string":break;case "Boolean":"0"===c||"1"===c?c=new Boolean("1"===c):e(h);break;case "boolean":"0"===c||"1"===c?c="1"===c:e(h);break;case "nan":""!==c&&e(h);c=NaN;break;case "infinity":""!==
c&&e(h);c=Infinity;break;case "-infinity":""!==c&&e(h);c=-Infinity;break;case "Number":"infinity"===j(c)?c=new Number(Infinity):"-infinity"===j(c)?c=new Number(-Infinity):"nan"===j(c)?c=new Number(NaN):(c=new Number(c),isNaN(c.valueOf())&&e(h));break;case "number":c=(new Number(c)).valueOf();isNaN(c)&&e(h);break;case "array":var f;try{f=a.parseJSON(c)}catch(m){e(h)}F(f)||e(h);for(var p=0;p<f.length;p++)switch(j(f[p].substring(0,1))){case "undefElem":delete f[p];break;case "objElem":for(var i=d(k("object")+
f[p].substring(1)),b=[],p=0,o=f.length-1;p<o;p++)b[p]=f[p];f=b;for(var n in i)f[r(n)]=i[n];break;default:f[p]=d(f[p])}c=f;break;case "object":try{f=a.parseJSON(c)}catch(E){e(h)}a.isPlainObject(f)||e(h);for(n in f)b=d(f[n]),delete f[n],f[r(n)]=b;c=f;break;case "date":c=new Date(parseInt(c,10));break;case "regexp":try{p=c.match(/^\/(.*)\/(.*)$/),i=r(p[1],g),c=RegExp(i,p[2])}catch(A){e(h)}break;case "null":""!==c&&e(h);c=null;break;case x:""!==c&&e(h);c=void 0;break;default:e(t)}return r(c,g)}v(b)||
e(11009);b.match(/^(.)\|(.*)/);var g=RegExp.$1;"1"!==g&&"2"!==g&&e(11003,[g,"2"]);var c=RegExp.$2;return d(c)},isJQueryObject:n,argsToArray:B,getByPath:function(a,b){v(a)||e(g,"h5.u.obj.getByPath()");var d=a.split("."),c=0;if("window"===d[0]&&(!b||b===window))c=1;for(var h=b||window,j=d.length;c<j&&!(h=h[d[c]],null==h);c++);return h}})})();(function(){function k(a,c){a.target||(a.target=c);a.timeStamp||(a.timeStamp=(new Date).getTime());if(!a.isDefaultPrevented){var f=!1;a.isDefaultPrevented=function(){return f};
a.preventDefault=function(){f=true}}if(!a.isImmediatePropagationStopped){var e=!1;a.isImmediatePropagationStopped=function(){return e};a.stopImmediatePropagation=function(){e=true}}}function y(a){var e={},f;for(f in a){var i=a[f];if(a.hasOwnProperty(f)&&(I(i)||null===i||"string"===typeof i||"number"===typeof i||"boolean"===typeof i))e[f]=i}this._mix=function(a){for(var c in e)a[c]=e[c]};this._hasInterface=function(a){for(var f in e)if(!c.u.str.startsWith(f,"_")&&typeof a[f]===la)return!1;return!0}}
function r(a){return new y(a)}a.extend(y.prototype,{mix:function(a){return this._mix(a)},hasInterface:function(a){return this._hasInterface(a)}});c.u.obj.expose("h5.mixin",{createMixin:r,eventDispatcher:r({hasEventListener:function(a,c){if(!this._eventListeners)return!1;var e=this._eventListeners[a];if(!e||!this._eventListeners.hasOwnProperty(a))return!1;for(var i=0,k=e.length;i<k;i++)if(e[i]===c)return!0;return!1},addEventListener:function(a,c){(2>arguments.length||!v(a))&&e(16E3);null==c||this.hasEventListener(a,
c)||(this._eventListeners||(this._eventListeners={}),this._eventListeners.hasOwnProperty(a)||(this._eventListeners[a]=[]),this._eventListeners[a].push(c))},removeEventListener:function(a,c){if(this.hasEventListener(a,c))for(var e=this._eventListeners[a],i=0,k=e.length;i<k;i++)if(e[i]===c){e.splice(i,1);break}},dispatchEvent:function(a){if(this._eventListeners){var c=this._eventListeners[a.type];if(c){c=c.slice(0);k(a,this);for(var e=0,i=c.length;e<i&&!a.isImmediatePropagationStopped();e++)I(c[e])?
c[e].call(a.target,a):c[e].handleEvent&&c[e].handleEvent(a);return a.isDefaultPrevented()}}}})})})();(function(){var k,y,r,o,C,f,i;function n(a){return a.match(/^error$/i)?k:a.match(/^warn$/i)?y:a.match(/^info$/i)?r:a.match(/^debug$/i)?o:a.match(/^trace$/i)?C:a.match(/^all$/i)?f:a.match(/^none$/i)?i:null}function B(a,b){var d={},c=a.slice(0,b),g=Math.min(E,b),h=c.slice(0,g).join(" <- ");c.length>g&&(h+=" ...");d.preview=h;d.all=c.join("\n");return d}function x(a){var b="";a.name?b=a.name:(/^\s*function\s*([\w\-\$]+)?\s*\(/i.test(a.toString()),
b=RegExp.$1);return b}function g(b){for(var b=c.u.obj.argsToArray(b),d=[],g=0,h=b.length;g<h;g++)d.push(a.type(b[g]));return d.join(", ")}function p(){}function t(b){(!v(b)||0===a.trim(b).length)&&e(d);this.category=a.trim(b)}var A=10003,h=10004,d=10005,b=10007,j=10008,m=10010,E=3;k=50;y=40;r=30;o=20;C=10;f=0;i=-1;var H=null;p.prototype={init:function(){},log:function(a){window.console&&(v(a.args[0])?this._logMsg(a):this._logObj(a))},_logMsg:function(a){var b=a.args,d=null,d=1===b.length?b[0]:c.u.str.format.apply(c.u.str,
b),b=this._getLogPrefix(a)+d;a.logger.enableStackTrace&&(b+="  ["+a.stackTrace.preview+"]");a.logger.enableStackTrace&&console.groupCollapsed?console.groupCollapsed(b):this._consoleOut(a.level,b);a.logger.enableStackTrace&&this._consoleOut(a.level,a.stackTrace.all);a.logger.enableStackTrace&&console.groupEnd&&console.groupEnd()},_consoleOut:function(a,b){var d=!1;a==k&&console.error?(console.error(b),d=!0):a==y&&console.warn?(console.warn(b),d=!0):a==r&&console.info?(console.info(b),d=!0):a==o&&console.debug&&
(console.debug(b),d=!0);!d&&console.log&&console.log(b)},_getLogPrefix:function(a){return"["+a.levelString+"]"+a.date.getHours()+":"+a.date.getMinutes()+":"+a.date.getSeconds()+","+a.date.getMilliseconds()+": "},_logObj:function(a){var b=a.args,d=this._getLogPrefix(a);b.unshift(d);a.level==k&&console.error?this._output(console.error,b):a.level==y&&console.warn?this._output(console.warn,b):a.level==r&&console.info?this._output(console.info,b):a.level==o&&console.debug?this._output(console.debug,b):
this._output(console.log,b)},_output:function(a,b){try{if(a.apply){a.apply(console,b);return}}catch(d){}a(b)}};t.prototype={enableStackTrace:!1,maxStackSize:10,error:function(a){this._log(k,arguments,this.error)},warn:function(a){this._log(y,arguments,this.warn)},info:function(a){this._log(r,arguments,this.info)},debug:function(a){this._log(o,arguments,this.debug)},trace:function(a){this._log(C,arguments,this.trace)},_traceFunctionName:function(b){var d=[],c=Error();if(c=c.stack||c.stacktrace)var h=
/_traceFunctionName/,d=c.replace(/\r\n/,"\n").replace(/at\b|@|Error\b|\t|\[arguments not available\]/ig,"").replace(/(http|https|file):.+[0-9]/g,"").replace(/ +/g," ").split("\n"),j=null,e=null,d=a.map(d,function(b,d){if(0===b.length)return null==e?"":null;j=""===a.trim(b)?"{anonymous}":a.trim(b);null===e&&h.test(b)&&(e=d);return j}).slice(e+3);else for(var b=b.caller,c=0,f=this.maxStackSize;c<f;c++){var m=x(b),p=g(b.arguments),i;try{i=b.caller}catch(k){d.push("{unable to trace}");break}m?d.push("{"+
m+"}("+p+")"):i?d.push("{anonymous}("+p+")"):d.push("{root}("+p+")");if(!i)break;b=i}return B(d,this.maxStackSize)},_log:function(a,b,d){var b={level:a,args:c.u.obj.argsToArray(b),stackTrace:this.enableStackTrace?this._traceFunctionName(d):""},g=H.out,h=H.defaultOut,d=[],j=!1;if(g)for(var g=P(g),e=0,f=g.length;e<f;e++){var m=g[e];if(m.compiledCategory.test(this.category)&&a>=m.compiledLevel&&0<=m.compiledLevel&&(d.push(m),!1!==m.terminate)){j=!0;break}}(!d.length||!j)&&d.push(h);e=0;for(g=d.length;e<
g;e++){h=d[e];f=h.compiledLevel;h=h.compiledTargets;if(a<f||0>f)break;b.logger=this;b.date=new Date;b.levelString=this._levelToString(a);if(!h||0===h.length)break;j=0;for(f=h.length;j<f;j++)h[j].log(b)}},_levelToString:function(a){if(a===k)return"ERROR";if(a===y)return"WARN";if(a===r)return"INFO";if(a===o)return"DEBUG";if(a===C)return"TRACE"}};c.u.obj.expose("h5.log",{createLogger:function(a){return new t(a)},configure:function(){function d(c,f,p){if(!p){var t=f.category;(!v(t)||0===a.trim(t).length)&&
e(m);t=a.trim(t);f.compiledCategory=pa(t);k.push(t)}p=null==f.level?n(p?g.level:i.level):v(f.level)?n(a.trim(f.level)):f.level;"number"!==typeof p&&e(A,f.level);f.compiledLevel=p;p=[];t=f.targets;if(null!=t){var E=[];null==t||F(t)||v(t)&&a.trim(t).length||e(j);for(var t=P(t),r=0,w=t.length;r<w;r++){null==t[r]||v(t[r])&&a.trim(t[r]).length||e(j);var M=t[r];if(M){-1!==a.inArray(M,E)&&e(b,M);var ca=c[M];ca||e(h,M);E.push(M);p.push(ca.compiledTarget)}}}f.compiledTargets=p}var g={level:"NONE",targets:null},
f=a.extend(!0,{},c.settings.log),i=f.defaultOut;i||(i=g,f.defaultOut=i);var k=[],t=f.target;t||(t={},f.target=t);(function(b){a.isPlainObject(b)||e(10009);for(var d in b){var c=b[d];a.type(c.type)!=="object"&&c.type!=="console"&&e(1E4);var g=null,g=c.type==="console"?new p:a.extend(true,{},c.type);g.init&&g.init(c);c.compiledTarget=g}b.console={type:"console",compiledTarget:new p}})(t);d(t,i,!0);var E=f.out;if(E)for(var E=P(E),r=0,o=E.length;r<o;r++)d(t,E[r]);H=f}})})();(function(){function e(k){c.settings.aspects=
a.map(P(k),function(a){a.target&&(a.compiledTarget=pa(a.target));a.pointCut&&(a.compiledPointCut=pa(a.pointCut));return a})}c.u.obj.ns("h5.settings");c.settings={commonFailHandler:null,aspects:null,log:null,listenerElementType:1,dynamicLoading:{retryCount:3,retryInterval:500},ajax:{retryCount:0,retryInterval:500,retryFilter:function(a){a=a.status;if("POST"===this.type||!(0===a||a===pb))return!1}},trackstartTouchAction:"none",res:{baseUrl:null,timeoutTime:1E4}};var y=c.u.createInterceptor(function(a,
c){this.log.info("{0}.{1}が開始されました。",this.__name,a.funcName);this.log.info(a.args);c.start=new Date;return a.proceed()},function(a,c){var e=(new Date).getTime()-c.start.getTime();this.log.info("{0}.{1}が終了しました。 Time={2}ms",this.__name,a.funcName,e)});c.u.obj.expose("h5.core.interceptor",{lapInterceptor:y,logInterceptor:y,errorInterceptor:function(a){var e=null;try{e=a.proceed()}catch(k){c.settings.commonFailHandler&&I(c.settings.commonFailHandler)&&c.settings.commonFailHandler.call(null,k)}return e}});
a(document).trigger("h5preinit");c.settings.aspects&&e(c.settings.aspects);c.log.configure()})();(function(){c.u.obj.expose("h5.env",{ua:function(c){function e(a,b){var d=G(a,"[^;)]*",b).split(" ");return 1===d.length?"":d[d.length-1]}function r(a,b){var d=G(a,"[^;) ]*",b).split("/");return 1===d.length?"":d[d.length-1]}function o(a,b){var d=G(a,"[^;) ]*",b).split(":");return 1===d.length?"":d[d.length-1]}var C=!!c.match(/iPhone/i),f=!!c.match(/iPad/i),i=C||f,n=!!c.match(/android/i),B=!!c.match(/Windows Phone/i),
x=!!c.match(/MSIE/)||!!c.match(/Trident/),g=!!c.match(/Firefox/i),p=!!c.match(/Chrome/i)||!!c.match(/CrMo/)||!!c.match(/CriOS/),t=!n&&!!c.match(/Safari/i)&&!p,A=!!c.match(/Webkit/i),h=!!c.match(/Opera/i),d=n&&!!c.match(/Safari/i)&&!p,b=!(!C&&!B&&!(d&&c.match(/Mobile/)&&!c.match(/SC-01C/)||n&&p&&c.match(/Mobile/)||c.match(/Fennec/i)||c.match(/Opera Mobi/i))),j=!(!f&&!(d&&!c.match(/Mobile/)||n&&p&&!c.match(/Mobile/)||c.match(/SC-01C/)||c.match(/Fennec/i)||c.match(/Opera Tablet/i))),m=!b&&!j,E=null,
H=null,R=function(b,d){return a.trim(c.substring(c.indexOf(b)+b.length,c.indexOf(d))).split("_")},G=function(b,d,g){return a.trim(c.match(!1===g?RegExp(b+d):RegExp(b+d,"i")))};if(C)H=R("iPhone OS","like"),E=parseInt(H[0]),H=H.join(".");else if(f)H=R("CPU OS","like"),E=parseInt(H[0]),H=H.join(".");else if(!n||!g)n?(H=e("Android"),E=parseInt(H.split(".")[0])):B&&((H=e("Windows Phone OS"))||(H=e("Windows Phone")),E=parseInt(H.split(".")[0]));x&&h&&(x=!1);var v=R=null;if(i||n&&d)R=E,v=H;else{var O=null;
x?O=e("MSIE",!1)||o("rv"):p?(O=r("Chrome",!1))||(O=r("CrMo",!1)):t?O=r("Version"):g?O=r("Firefox"):h&&((O=r("Version"))||(O=r("Opera")),O||(O=e("Opera")));O&&(R=parseInt(O.split(".")[0]),v=O)}return{osVersion:E,osVersionFull:H,browserVersion:R,browserVersionFull:v,isiPhone:C,isiPad:f,isiOS:i,isAndroid:n,isWindowsPhone:B,isIE:x,isFirefox:g,isChrome:p,isSafari:t,isOpera:h,isAndroidDefaultBrowser:d,isSmartPhone:b,isTablet:j,isDesktop:m,isWebkit:A}}(navigator.userAgent)})})();(function(){function k(a){function c(){e=
!0;f=this;h=i(arguments);if(La(a)||va(a))return a;var b=i(arguments);if(0<d.length)for(var j=0,m=d.length;j<m;j++){var p=b;p!==arguments&&(p=P(p));I(d[j])&&d[j].apply(this,p)}return a}var e=!1,f=null,h=null,d=[];a.progress=function(){for(var b=i(arguments),c=0,m=b.length;c<m;c++){var p=b[c];if(F(p))a.progress.apply(this,p);else if(I(p))if(e){var n=h;n!==h&&(n=P(n));p.apply(f,n)}else d.push(p)}return this};a.notify=c;a.notifyWith=function(a,d){return!d?c.apply(a):c.apply(a,d)}}function y(a){if(!a)return!1;
for(var a=P(a),c=0,e=a.length;c<e;c++)if(I(a[c]))return!0;return!1}function r(g,e){function t(a){e?e[a]&&(g[a]=e[a]):(j[a]=g[a],g[a]=function(){return function(){if(!d){var b=i(arguments);if("then"===a||"pipe"===a)b=b[1];y(b)&&(d=!0)}return g._h5UnwrappedCall.call(this,a,i(arguments))}}(a),m[a]=g[a])}function A(a){return function(){var e=c.settings.commonFailHandler;!d&&e&&!b&&(g.fail.call(this,e),b=!0);return a.apply(this,arguments)}}if(g._h5UnwrappedCall)return g;var h=!!g.progress;!h&&!x(g)?k(g):
e&&(g.progress=e.progress);var d=!1,b=!1,j={},m={};g._h5UnwrappedCall=e?e._h5UnwrappedCall:function(b,d){d=P(d);a.extend(g,j);var c=g[b].apply(this,d);a.extend(g,m);return c};for(var E=0,B=o.length;E<B;E++){var R=o[E];g[R]&&t(R)}g.pipe&&!e&&(g.pipe=function(){for(var a=c.async.deferred(),b=i(arguments),d=0,g=C.length;d<g;d++){var e=this;(function(b,d,c){function g(){if(h){var d=b.apply(this,arguments);if(d&&I(d.promise)){r(d);d.done(a.resolve);d._h5UnwrappedCall("fail",a.reject);I(d.progress)&&d.progress(a.notify)}else a[c+
"With"](this,[d])}else a[c+"With"](this,arguments)}var h=I(b);if(!h&&d==="fail")e._h5UnwrappedCall(d,g);else e[d](g)})(b[d],C[d],f[d])}return a.promise()},m.pipe=g.pipe);if(g.then&&!e){var G=g.then;g.then=n?g.pipe:function(){var a=arguments,b=G.apply(this,a);!h&&y(a[2])&&g.progress.call(g,a[2]);return b};m.then=g.then}g.reject&&(g.reject=e&&e.reject?e.reject:A(g.reject));g.rejectWith&&(g.rejectWith=e&&e.rejectWith?e.rejectWith:A(g.rejectWith));if(g.promise)if(e&&e.promise)g.promise=e.promise;else{var v=
g.promise;g.promise=function(){return r(v.apply(this,arguments),g)}}return g}var o=["fail","always","pipe","then"],C=["done","fail","progress"],f=["resolve","reject","notify"],i=c.u.obj.argsToArray,n=function(){var c=a.Deferred();return c!==c.then()}(),B=function(){var c=a.Deferred();return r(c)},x=function(a){return!!a&&a.done&&a.fail&&!a.resolve&&!a.reject};c.u.obj.expose("h5.async",{deferred:B,when:function(){var g=i(arguments);1===g.length&&F(g[0])&&(g=g[0]);var e=g.length,f=c.async.deferred(),
n=f.promise(),h=a.when.apply(a,g).done(function(){f.resolveWith(this&&this.promise&&this.promise()===h?f:this,i(arguments))}).fail(function(){f.rejectWith(this,i(arguments))});if(h.progress)h.progress(function(){f.notifyWith(this===h?n:this,i(arguments))});else{for(var d=[],b=0;b<e;b++)d[b]=void 0;for(var j=function(a){return function(b){d[a]=1<arguments.length?i(arguments):b;f.notifyWith(n,d)}},b=0;b<e;b++){var m=g[b];m&&I(m.promise)&&m.progress&&(1<e?m.progress(j(b)):m.progress(function(){f.notifyWith(n,
i(arguments))}))}}return n},isPromise:x,loop:function(c,f,i){F(c)||e(5E3);var n=B(),h="number"===a.type(i)?i:20,d=0,b=c.length,j,m=null,k=function(){if(d===b)n.resolve(c);else{var a=f.call(c,d,c[d],m);d++;x(a)?a.done(function(){j()}).fail(function(){n.reject(c)}):j()}},r=function(){setTimeout(function(){var a=d-1;0<d&&n.notify({data:c,index:a,value:c[a]});k()},0)},o=!1;j=function(){o||(0===d%h?r():k())};var y=!1,m={resume:function(){!y&&o&&(o=!1,j())},pause:function(){o=!0},stop:function(){y=!0;n.resolve(c)}};
r();return n.promise()}})})();(function(){function e(a,c){for(var k=0,r=C.length;k<r;k++){var g=C[k];a[g]&&(c[f[g]](a[g]),a[g]=void 0)}}function y(c,e,f){for(var k in e)if(e.hasOwnProperty(k)&&(f||!I(e[k]))&&-1===a.inArray(k,o))c[k]=e[k]}function r(a,c){y(this,a,!0);c.promise(this);var e=this.always;this.always=function(){e.apply(this,arguments);return this}}var o=["error","success","complete"],C=["error","success","complete"],f={success:"done",error:"fail",complete:"always"};c.u.obj.expose("h5",
{ajax:function(){function f(a,c,e){y(p,e);g.resolveWith(this,arguments)}function n(c,e,h){if(0===o.retryCount||!1===o.retryFilter.apply(this,arguments))y(p,c),g.rejectWith(this,arguments);else if(o.retryCount--,this.async){var d=this;setTimeout(function(){a.ajax(d).done(f).fail(n)},o.retryInterval)}else a.ajax(this).done(f).fail(n)}var o={},x=arguments;v(x[0])?(a.extend(o,x[1]),o.url=x[0]):a.extend(o,x[0]);var o=a.extend({},c.settings.ajax,o),g=c.async.deferred();e(o,g);var x=a.ajax(o),p=new r(x,
g);x.done(f).fail(n);return p}})})();(function(){function e(a,c){this.id=a;this.content=c}function y(a,c,e){this.url=a;this.path=c;this.content=e}function r(a){this._resourceKey=a}function o(a){a=0===a.indexOf("./")?a.slice(2):a;return(c.settings.res.baseUrl||"./")+a}function v(a,c,e){void 0===e&&I(a)&&(e=a,a=void 0);i.unshift({type:a,test:c,resolver:e})}var f=c.async.deferred,i=[],n={};waitingInfoMap={};waitingForImmediateDeferred=[];waitingImmediateTimer=null;var B={MAX_CACHE:10,cache:{},cacheUrls:[],
accessingUrls:{},append:function(a){this.cacheUrls.length>=this.MAX_CACHE&&this.clearCache(this.cacheUrls[0]);var c=a.url;this.cache[c]=a;this.cacheUrls.push(c)},clearCache:function(a,c){var e=ia(a);c||delete this.cache[e];for(var f=0,h=this.cacheUrls.length;f<h;f++)if(this.cacheUrls[f]===e){this.cacheUrls.splice(f,1);break}},clearAllCache:function(){this.cacheUrls=[];this.cache={}},getResourceFromCache:function(a){var c=this.cache[a];this.clearCache(a,!0);this.cacheUrls.push(a);return c},loadResourceFromPath:function(a){var e=
ia(a);if(this.accessingUrls[e])return this.accessingUrls[e];var i=f(),n=i.promise();this.accessingUrls[e]=n;var h=this;c.ajax(a,{dataType:"text"}).done(function(d,b,c){delete h.accessingUrls[e];d=new y(e,a,c.responseText);h.append(d);i.resolve(d)}).fail(function(d){delete h.accessingUrls[e];i.reject(S(17E3,[d.status,e],{url:e,path:a,error:d}))});return n}};a.extend(r.prototype,{resolve:function(e){function f(b){for(var d=0,c=i.length;d<c;d++)if(!(e&&e!==i[d].type)){var h=i[d].test;if(!e&&h)if("regexp"===
a.type(h)){if(!h.test(b))continue}else if(!1===h(b))continue;return i[d].resolver(b,e)}return!1}if(!F(this._resourceKey))return f(this._resourceKey);for(var n=this._resourceKey,k=[],h=0,d=n.length;h<d;h++){var b=f(n[h]);k.push(b)}var j=c.async.deferred();ba(k,function(a){F(a)||(a=[a]);a.unshift(a.slice(0));j.resolveWith(j,a)},function(a){j.reject(a)});return j.promise()},getKey:function(){return this._resourceKey}});var x={load:function(a){var c=ia(a);return B.cache[c]?f().resolve(B.getResourceFromCache(c)).promise():
B.loadResourceFromPath(a)},clearCache:function(a){B.clearCache(a)},clearAllCache:function(){B.clearAllCache()}};v("namespace",null,function(a){var e=n[a]||c.u.obj.getByPath(a);if(e)return f().resolve(e).promise();if(waitingInfoMap[a])return waitingInfoMap[a].deferred.promise();var e=o(a.replace(/\./g,"/"))+".js",i=f(),k=c.settings.res.timeoutTime,h=null;0<k&&(h=setTimeout(function(){waitingInfoMap[a]&&(delete waitingInfoMap[a],i.reject(S(17001,[a])))},k));waitingInfoMap[a]={deferred:i,timer:h};c.u.loadScript(e).done(function(){var d=
n[a]||c.u.obj.getByPath(a);d&&waitingInfoMap[a]&&(n[a]=d,delete waitingInfoMap[a],clearTimeout(h),i.resolve(d))}).fail(function(d){clearTimeout(h);delete waitingInfoMap[a];i.reject(d)});return i.promise()});v("ejsfile",/.*\.ejs(\?.*$|$)/,function(c){var i=f();x.load(o(c)).done(function(c){var f=a(c.content).filter(function(){return 1===this.nodeType&&0!==this.tagName.indexOf("/")}),h=[];0<f.not('script[type="text/ejs"]').length?i.reject(S(7011,null,{url:c.url,path:c.path})):(0===f.length&&i.reject(S(7001,
null,{url:c.url,path:c.path})),f.each(function(){var d=a.trim(this.id);d||i.reject(S(7002,null,{url:c.url,path:c.path}));var b=a.trim(this.innerHTML);h.push(new e(d,b))}),i.resolve({url:c.url,path:c.path,templates:h}))}).fail(function(a){var c=a.detail,c=S(7003,[c.error.status,c.url],c);a.code=c.code;a.message=c.message;a.detail=a.detail;i.reject(a)});return i.promise()});v("jsfile",/.*\.js(\?.*$|$)/,function(a){return c.u.loadScript(o(a))});v("cssfile",/.*\.css(\?.*$|$)/,function(a){var c=document.getElementsByTagName("head")[0],
e=document.createElement("link");e.type="text/css";e.rel="stylesheet";e.href=o(a);c.appendChild(e);return f().resolve(e).promise()});c.u.obj.expose("h5.res",{dependsOn:function(a){return new r(a)},addResolver:v,isDependency:function(a){return a instanceof r},urlLoader:x,resolvers:i,register:function(a,e,f,i){f&&(i?c.u.obj.expose(i,e):c.u.obj.expose(a,e));n[a]=e;if(f=waitingInfoMap[a])delete waitingInfoMap[a],a=f.deferred,(f=f.timer)&&clearTimeout(f),waitingForImmediateDeferred.push({dfd:a,value:e}),
waitingImmediateTimer||(waitingImmediateTimer=setTimeout(function(){waitingImmediateTimer=null;for(var a=waitingForImmediateDeferred.splice(0,waitingForImmediateDeferred.length),c=0,b=a.length;c<b;c++)a[c].dfd.resolve(a[c].value)},0))},get:function(a){return c.res.dependsOn(a).resolve()}})})();(function(){function k(a){null!=a.style.transform&&(a.style.transform="");null!=a.style.mozTansform&&(a.style.mozTansform="");null!=a.style.webkitTansform&&(a.style.webkitTansform="")}function y(a,b,c,d,l){if(!Pa){Pa=
{};var a=new Wa(null,"a"),f;for(f in a)a.hasOwnProperty(f)&&"__name"!==f&&"__templates"!==f&&"__meta"!==f&&(Pa[f]=1);a=Wa.prototype;for(f in a)a.hasOwnProperty(f)&&(Pa[f]=null)}for(var h in c)h in Pa&&e(Cb,[l,h],{controllerDefObj:c})}function r(K,b){function c(d,l){-1!==a.inArray(d,l)&&e(Db,[b],{controllerDefObj:K});p(d,function(a){c(a,l.concat([d]))},!0)}c(K,[])}function o(K){function b(c,d){-1!==a.inArray(c,d)&&e(Eb,[K.__name],{logicDefObj:K});t(c,function(a){b(a,d.concat(c))})}b(K,[])}function C(K,
b,c){null==K&&e(Qa,[c],{controllerDefObj:b});!v(K)&&"object"!==typeof K&&e(rb,[c],{controllerDefObj:b});K=a(K);0===K.length&&e(l,[c],{controllerDefObj:b});1<K.length&&e(z,[c],{controllerDefObj:b});K[0].nodeType!==Ta&&K[0].nodeType!==X&&e(sb,[c],{controllerDefObj:b})}function f(K){K=a(K);this._controller=null;if(0===K.length)this._targetElement=null;else{1<K.length?e(z):K[0].nodeType!==Ta&&K[0].nodeType!==X?e(sb):this._targetElement=K[0];var b=c.core.controllerManager.getController(this._controller);
1<b.length&&e();1==b.length?this._controller=controllres[0]:0===b.length&&(K=K.data("h5-controller"),this._controller=c.res.dependsOn(K))}}function i(a,b,c,d,l){this.controller=a;this.event=b;this.evArg=c;this.selector=d;this.selectorType=l}function n(a){if(!na(this)&&this.__controllerContext.executeListeners)return a.proceed()}function B(a,b,d){var l;l=a.__name;var e=[],f=c.settings.aspects;if(f&&0!==f.length)for(var f=P(f),h=f.length-1;-1<h;h--){var q=f[h];if(!q.target||q.compiledTarget.test(l)){var j=
q.interceptors;if(!q.pointCut||q.compiledPointCut.test(b))if(F(j))for(q=j.length-1;-1<q;q--)e=e.concat(j[q]);else e.push(j)}}l=e;d&&l.push(n);return x(a[b],b,l)}function x(a,b,c){for(var d=function(a,b,K){return function(){var c=this;return K.call(c,{target:c,func:a,funcName:b,args:arguments,proceed:function(){return a.apply(c,this.args)}})}},l=0,e=c.length;l<e;l++)a=d(a,b,c[l]);return a}function g(a,b,d){if(d&&a===ua)return d.rootElement;for(var l=["window","document","navigator"],e=0,f=l.length;e<
f;e++){var h=l[e];if(a===h||tb(a,h+"."))return c.u.obj.getByPath(a,Q(b))}return d&&tb(a,"this.")?c.u.obj.getByPath(a.slice(5),d):a}function p(a,b,c){if(c){var d=xa.get(a.__name);if(d){c=0;for(e=d.childControllerProperties.length;c<e;c++){var l=d.childControllerProperties[c];if((f=a[l])&&!1===b(a[l],a,l))return!1}}else for(l in a){var d=a,e=l,f=c,h=d[e];if(Ra(e,za)&&"rootController"!==e&&"parentController"!==e&&h&&(f||h.__controllerContext&&!h.__controllerContext.isRoot&&(!h.parentController||h.parentController===
d))&&!1===b(a[l],a,l))return!1}}else if(!na(a))for(var l=a.__controllerContext.childControllers,c=0,e=l.length;c<e;c++){var f=l[c];if(!1===b(f,a))return!1}}function t(a,b){var c=xa.get(a.__name);if(c)for(var d=0,l=c.logicProperties.length;d<l;d++){var e=c.logicProperties[d];if(!1===b(a[e],a,e))return!1}else for(e in a)if(a.hasOwnProperty(e)&&Ra(e,gb)&&!1===b(a[e],a,e))return!1}function A(a,b,c,d){return!1===b.call(this,a,c,d)?!1:p(a,function(a,c,K){if(A(a,b,c,K)===false)return false})}function h(a,
b,c,d){if(!1===p(a,function(a,c,K){if(!a||!1===h(a,b,c,K))return!1})||!1===b.call(this,a,c,d))return!1}function d(a,b){var c=[];p(a,function(a){(a=a[b])&&c.push(a)});return c}function b(a){var b=a.__controllerContext.cache.bindMap,c=N(a.rootElement),d;for(d in b)for(var l=j(a,b[d],a[d]),e=0,f=l.length;e<f;e++)m(l[e],c)}function j(b,d,l){function e(b){var d=b.handler,K=b.controller;b.originalHandler=b.originalHandler||d;b.handler=function(){var l=!b.isNativeBind&&1===c.settings.listenerElementType?
a(this):this;d.call(K,da(b,arguments),l)}}var f=d.selector,h=d.eventName;switch(h){case "mousewheel":l=W(b,f,h,l);break;case Aa:case Ga:case ya:l=J(b,f,h,l);break;default:l=$(b,f,h,l)}F(l)||(l=[l]);f=0;for(h=l.length;f<h;f++){var q=l[f];e(q);q.isBindRequested=d.isBindRequested;q.isGlobal=d.isGlobal;q.bindTarget=d.bindTarget;q.controller=b}return l}function m(b,d){var l=b.controller,e=l.rootElement,f=b.selector,h=b.eventName,q=b.handler,j=b.isBindRequested,s=b.isGlobal;b.bindTarget?(b.evSelectorType=
Ha.SELECTOR_TYPE_OBJECT,Sa(b)):s?(l=g(f,d,l),j||!v(l)?(b.evSelectorType=Ha.SELECTOR_TYPE_OBJECT,b.bindTarget=v(l)?a(l):l,Sa(b)):(b.evSelectorType=Ha.SELECTOR_TYPE_GLOBAL,a(d).delegate(l,h,q)),b.evSelector=l):(b.evSelectorType=Ha.SELECTOR_TYPE_LOCAL,b.evSelector=f,j?(b.bindTarget=a(f,e),Sa(b)):a(e).delegate(f,h,q));b.isBindCanceled||(b.controller.__controllerContext.boundHandlers.push(b),Fa&&h===Aa&&null!=c.settings.trackstartTouchAction&&(s?a(b.evSelector,d):a(b.evSelector,e)).each(function(){this.style[qa]=
c.settings.trackstartTouchAction}))}function E(b,c,d){var l=b.controller,e=l.rootElement,f=b.selector,h=b.handler,q=b.eventName,j=b.isGlobal;if(b.bindTarget)c=b.bindTarget,e=b.eventName,f=b.handler,b.isNativeBind?c.removeEventListener(e,f):a(c).unbind(e,f);else if(j){if(null==Q(c))return;a(c).undelegate(f,q,h)}else a(e).undelegate(f,q,h);d||(d=l.__controllerContext.boundHandlers,d.splice(a.inArray(b,d),1))}function H(a,b){A(a,function(a){a.__controllerContext.executeListeners=b})}function R(a,b,c){return function(){var d=
null,l=a[b],e=a.__name,f=!1,f="__init"===b?a.isInit:"__postInit"===b?a.isPostInit:a.isReady;if(!f&&l)try{d=a[b]({args:a.__controllerContext.args})}catch(h){ja(a,h)}d&&I(d.done)&&I(d.fail)?d.done(c).fail(function(){var b=S(Fb,e,Ia(arguments));ja(a.rootController,null,b)}):c()}}function G(a,b){s(a)||A(a,function(c){var d,l;"__init"===b?(d=ea(c),l=[c.preInitPromise],c.parentController&&l.push(c.parentController.initPromise)):"__postInit"===b?(d=wa(c),l=ta(c)):(d=fb(c),l=O(c));var e=a.__controllerContext;
e.waitingPromisesManagerMap=e.waitingPromsiesManager||{};e.waitingPromisesManagerMap[b]=ba(l,R(c,b,d))})}function ta(a){var b=d(a,"postInitPromise");b.push(a.initPromise);return b}function O(a){var b=d(a,"readyPromise");b.push(a.postInitPromise);return b}function ea(b){return function(){function c(){var a=!0;A(b.rootController,function(b){return a=b.isInit});return a}if(!L(b))if(b.isInit)c()&&ga(b.rootController);else{b.isInit=!0;var d=b.__controllerContext.initDfd;delete b.__controllerContext.templatePromise;
delete b.__controllerContext.preInitDfd;delete b.__controllerContext.initDfd;var l=b.rootElement;try{var e=b.__meta,f=b.__controllerContext.childControllers,h;for(h in e)-1!==a.inArray(b[h],f)&&(b[h].__controllerContext.metaRootElement=e[h]&&e[h].rootElement);p(b,function(a){var c=a.__controllerContext.metaRootElement;delete a.__controllerContext.metaRootElement;a.rootElement||(c=c?M(c,a,b):l,C(c,a.__controllerContext.controllerDef,a.__name),a.rootElement=c,a.view.__controller=a)})}catch(q){ja(b,
q);return}e=c();d.resolveWith(b);!L(b)&&e&&ga(b.rootController)}}}function wa(c){return function(){if(!L(c)){c.isPostInit=!0;var d=c.__controllerContext;d.waitingPromsiesManager=d.waitingPromsiesManager||{};d.waitingPromsiesManager.__postInit=ba(ta(c),function(){if(!L(c)){var l=d.postInitDfd;if(l&&(delete d.postInitDfd,l.resolveWith(c),!L(c)&&!d.isExecutedBind))if(d.isRoot){var l=c.__meta,e=d.childControllers,f;for(f in l)-1!==a.inArray(c[f],e)&&(c[f].__controllerContext.metaUseHandlers=l[f]&&l[f].useHandlers);
A(c,function(a){var c=a.__controllerContext.metaUseHandlers;delete a.__controllerContext.metaUseHandlers;a.__controllerContext.isExecutedBind||(a.__controllerContext.isExecutedBind=!0,!1!==c&&b(a))});if(!1!==d.managed&&(a(c.rootElement).trigger("h5controllerbound",c),L(c)))return;ca(c)}else c.rootController.isPostInit&&((!c.parentController.__meta||!1!==c.parentController.__meta.userHandlers)&&b(c),ca(c.rootController))}})}}}function fb(b){return function(){if(!L(b)){b.isReady=!0;var c=b.__controllerContext;
c.waitingPromsiesManager=c.waitingPromsiesManager||{};c.waitingPromsiesManager.__ready=ba(O(b),function(){if(!L(b)){var d=c.readyDfd;d&&(delete c.readyDfd,d.resolveWith(b),!L(b)&&c.isRoot&&a(b.rootElement).trigger("h5controllerready",b))}})}}}function V(b,c){if(!v(b))return a(b);var d=a.trim(b);return ub.test(d)?(d=a.trim(d.substring(1,d.length-1)),a(g(d,N(c.rootElement),c))):a(c.rootElement).find(b)}function $(a,b,c,d){return{controller:a,selector:b,eventName:c,handler:d}}function W(a,b,c,d){return{controller:a,
selector:b,eventName:typeof document.onmousewheel===la?"DOMMouseScroll":c,handler:function(b){var c=b.event;null==c.wheelDelta&&c.originalEvent&&null!=c.originalEvent.wheelDelta&&(c.wheelDelta=c.originalEvent.wheelDelta);null==c.wheelDelta&&c.originalEvent&&null!=c.originalEvent.detail&&(c.wheelDelta=40*-c.originalEvent.detail);d.call(a,b)}}}function J(b,c,d,l){function e(a,b){for(var c in a)a.hasOwnProperty(c)&&!b[c]&&"target"!==c&&"currentTarget"!==c&&"originalEvent"!==c&&"liveFired"!==c&&(b[c]=
a[c]);b.h5DelegatingEvent=a}var f=typeof document.ontouchstart!==la;if(d!==Aa){var h=$(b,c,d,function(b){var c=b.event,d=c.h5DelegatingEvent;if(!d)return l.apply(this,arguments);d=d.type;if("mousemove"===d||"mouseup"===d)d=a(c.currentTarget).offset()||{left:0,top:0},c.offsetX=c.pageX-d.left,c.offsetY=c.pageY-d.top;l.apply(this,arguments)});h.originalHandler=l;return h}var q=a(N(b.rootElement));return function(){function h(c,d,l){return function(f){var j;a:{switch(c){case "touchstart":case "mousedown":j=
Aa;break a;case "touchmove":case "mousemove":j=Ga;break a;case "touchend":case "mouseup":j=ya;break a}j=void 0}var Va=j===Aa;if(!Va||!g){var u=0===f.event.type.indexOf("touch");u&&Ab(f.event,c);var z=new a.Event(j);e(f.event,z);var i=f.event.target;d&&(i=d);l&&l(z);var m=f.event.originalEvent||f.event;Va&&-1===a.inArray(m,Ba)&&(Ba=[],Ja=[]);var w=a.inArray(m,Ba);-1===w&&(w=Ba.push(m)-1,Ja[w]=!1);if(!Ja[w]&&(!u||g||Va))Ja[w]=!0,a(i).trigger(z,f.evArg),g=!0;if(f.event.currentTarget===document&&(j===
ya&&(Ba=[],Ja=[]),-1!==a.inArray(m,Ba)))Ba.splice(w,1),Ja.splice(w,1);if(Va&&g){z.h5DelegatingEvent.preventDefault();j=z.target;var db=z.clientX,Y=z.clientY,Ka=u?"touchmove":"mousemove",T=u?"touchend":"mouseup",Bb=h(Ka,j,function(a){var b=a.clientX,c=a.clientY;a.dx=b-db;a.dy=c-Y;db=b;Y=c}),L=h(T,j),n=function(a){f.event=a;f.evArg=fa(arguments);Bb(f)},k=function(a){f.event=a;f.evArg=fa(arguments);L(f)},Da=u?a(j):q;s=function(){Ba=[];Ja=[];Da.unbind(Ka,n);Da.unbind(T,k);if(!u&&b.rootElement!==document){a(b.rootElement).unbind(Ka,
n);a(b.rootElement).unbind(T,k)}};Da.bind(Ka,n);Da.bind(T,k);!u&&b.rootElement!==document&&(a(b.rootElement).bind(Ka,n),a(b.rootElement).bind(T,k))}else j===ya&&(s(),g=!1)}}}function j(a){return{controller:b,selector:c,eventName:a,handler:h(a)}}var s=null,g=!1,u=[$(b,c,d,l)];f&&u.push(j("touchstart"));u.push(j("mousedown"));return u}()}function qb(b){if("svg"!==b.tagName.toLowerCase()||Ua())return a(b).offset();var c=N(b).createElementNS(hb,"rect"),d=b.viewBox,l=d.baseVal.y;c.setAttribute("x",d.baseVal.x);
c.setAttribute("y",l);c.setAttribute("width",1);c.setAttribute("height",1);k(c);b.appendChild(c);d=a(c).offset();b.removeChild(c);return d}function Ab(a,b){var c=a.originalEvent;if(c){var d="touchend"===b||"touchcancel"===b?c.changedTouches[0]:c.touches[0],l=d.pageX,e=d.pageY;a.pageX=c.pageX=l;a.pageY=c.pageY=e;a.screenX=c.screenX=d.screenX;a.screenY=c.screenY=d.screenY;a.clientX=c.clientX=d.clientX;a.clientY=c.clientY=d.clientY;d=a.target;if(d.ownerSVGElement)d=d.farthestViewportElement;else if(d===
window||d===document)d=document.body;d=qb(d);e-=d.top;a.offsetX=c.offsetX=l-d.left;a.offsetY=c.offsetY=e}}function fa(a){return 3>a.length?a[1]:Ia(a).slice(1)}function da(a,b){var c=null,d=null;b&&(c=b[0],d=fa(b));var l=c;if(l&&null==l.offsetX&&null==l.offsetY&&l.pageX&&l.pageY){var e=l.target;if(e.ownerSVGElement)e=e.farthestViewportElement;else if(e===window||e===document)e=document.body;e=qb(e);l.offsetX=l.pageX-e.left;l.offsetY=l.pageY-e.top}return new i(a.controller,c,d,a.evSelector,a.evSelectorType)}
function w(a){A(a,function(a){a.rootElement=null;a.view.__controller=null})}function M(b,c,d){null==b&&e(Qa,[c.__name]);!v(b)&&"object"!==typeof b&&e(rb,[c.__name]);b=d?V(b,d):a(b);0===b.length&&e(l,[c.__name]);1<b.length&&e(z,[c.__name]);return b.get(0)}function ca(b){var c=b.__controllerContext.managed,d=Ca.controllers;-1===a.inArray(b,d)&&!1!==c&&d.push(b);b.__controllerContext.triggerReadyExecuted=!0;G(b,"__ready")}function D(a,b){!1===b?G(a,"__init"):setTimeout(function(){L(a)||!a.__controllerContext.isRoot&&
a.rootController.readyDfd||G(a,"__init")},0)}function ga(a){a.__controllerContext.triggerPostInitExecuted=!0;G(a,"__postInit")}function ib(a,b){A(a,function(a){var c=ra();c.resolve();var d=a.__controllerContext;d.templatePromise=c.promise();d.initDfd=ra();d.postInitDfd=ra();d.readyDfd=ra();d.isUnbinding=!1;d.isUnbinded=!1;d.isExecutedBind=!1;d.triggerPostInitExecuted=!1;d.triggerReadyExecuted=!1;d.args=b;a.initPromise=d.initDfd.promise();a.postInitPromise=d.postInitDfd.promise();a.readyPromise=d.readyDfd.promise();
a.isInit=!1;a.isPostInit=!1;a.isReady=!1})}function Xa(b,d){var l=null,e=d;a.isPlainObject(e)?l=e.target:e={};l=l?V(l,b):b.rootElement;return c.ui.indicator.call(b,l,e)}function Ma(a,b){var c=[],d=null;h(a,function(a){if(a[b]&&I(a[b])){try{var l=a[b]()}catch(e){d=d||e}vb(l)&&c.push(l)}});if(d)throw d;return c}function ja(a,b,c){function d(){var a=b||c||j||z;h(e,function(b){b.view&&b.view.__view&&b.view.__view.clear();if(a)b.__controllerContext.isDisposed=1;else for(var c in b)b.hasOwnProperty(c)&&
(b[c]=null)});z?u.rejectWith(e,[z]):u.resolveWith(e);if(a&&(Ca.dispatchEvent({type:"lifecycleerror",detail:a,rootController:e}),b||j))throw b||j;}function l(){z=j||S(Gb,e.__name,Ia(arguments));d()}var e=a.__controllerContext&&(a.__controllerContext.isRoot?a:a.rootController);if(e){if(!s(e)){e.__controllerContext.isDisposing=1;try{Ya(e,c||b)}catch(f){b=b||f}var q,j=null;try{q=Ma(e,"__dispose")}catch(g){b=b||g,j=j||g}var u=e.deferred(),z=null;j?l():ba(q,d,l,!0);return u.promise()}}else if(b)throw b;
}function Ya(b,c){if(!L(b)){b.__controllerContext.isUnbinding=1;ma(b,c);var d;try{Ma(b,"__unbind")}catch(l){d=l}A(b,function(a){var b=a.rootElement;if(b){for(var b=N(b),c=a.__controllerContext.boundHandlers,d=0,l=c.length;d<l;d++)E(c[d],b,!0);a.__controllerContext.boundHandlers=[]}});b.__controllerContext.unbindList={};Ca.controllers=a.grep(Ca.controllers,function(a){return a!==b});b.isPostInit&&!1!==b.__controllerContext.managed&&a(b.rootElement).trigger("h5controllerunbound",b);w(b);b.__controllerContext.isUnbinded=
1;if(d)throw d;}}function oa(a,b){return b.view.__view.isAvailable(a)?b.view.__view:b.parentController?oa(a,b.parentController):c.core.view}function na(a){return!a.__controllerContext||a.__controllerContext.isDisposed}function s(a){return na(a)||a.__controllerContext.isDisposing}function L(a){a=a.__controllerContext&&a.__controllerContext.isRoot?a:a.rootController;return!a||na(a)||a.__controllerContext.isUnbinding||a.__controllerContext.isUnbinded}function ma(a,b){var c=["postInitDfd","readyDfd"],
d=[];A(a,function(a){d.push(a);var c=a.__controllerContext.initDfd;c&&!La(c)&&!va(c)&&c.rejectWith(a,[b])});for(var l=0,e=c.length;l<e;l++)for(var f=c[l],h=d.length-1;0<=h;h--){var q=d[h],j=q.__controllerContext[f];j&&!La(j)&&!va(j)&&j.rejectWith(q,[b])}}function Za(a,b){for(var c=a.childNodes,d=0,l=c.length;d<l;d++){var e=c[d];if(1===e.nodeType){if(e=Za(e,b))return e}else if(8===e.nodeType){var f=e.nodeValue;if(0===f.indexOf(sa)){var h=f.indexOf("}");if(-1!==h&&(f=f.slice(0,h).match(/id="([A-Za-z][\w-:\.]*)"/))&&
f[1]===b)return e}}}return null}function q(a){var b=this;return function(){return a.apply(b,arguments)}}function u(a){var b=this;return function(){var d=c.u.obj.argsToArray(arguments);d.unshift(this);return a.apply(b,d)}}function T(a,b,d){function l(f){c.u.obj.getByPath("h5.core.view")||e(Hb);d=F(d)?d:[d];for(var h=[],q=0,j=d.length;q<j;q++){var s=Na(d[q])?d[q]:c.res.dependsOn(d[q]);h.push(s.resolve("ejsfile"))}ba(h,function(c){for(var c=F(c)?c:[c],d=0,l=c.length;d<l;d++)for(var e=c[d].templates,
f=0,h=e.length;f<h;f++)try{a.view.__view.register(e[f].id,e[f].content)}catch(q){b.reject(q)}b.resolve()},function(a){var d=a.detail.error.status;f===c.settings.dynamicLoading.retryCount||0!==d&&d!==pb?setTimeout(function(){b.reject(a)},0):setTimeout(function(){l(++f)},c.settings.dynamicLoading.retryInterval)})}l(0)}function Y(b,c,d,l){var f=v(b),h=f?null:b,b=f?a.trim(b):null,c=a.trim(c),q=!f||ub.test(b),j=Oa.test(c);j&&(c=a.trim(a.trim(c.substring(1,c.length-1))));f&&q&&(b=a.trim(b.substring(1,b.length-
1)),"this"===b&&e(Ib,[d.__name],{controllerDef:d}));return{selector:b,bindTarget:h,isGlobal:q,isBindRequested:j,eventName:c,propertyKey:l}}function $a(){this.logicProperties=[];this.eventHandlerProperties=[];this.functionProperties=[];this.otherProperties=[];this.bindMap={};this.childControllerProperties=[]}function jb(b){var c=new $a,d=c.logicProperties,l=c.eventHandlerProperties,f=c.functionProperties,h=c.otherProperties,q=c.bindMap,j=c.childControllerProperties,s={},g;for(g in b)if(-1!==g.indexOf(" ")&&
I(b[g])){l.push(g);var u=a.trim(g),z=u.lastIndexOf(" "),u=Y(u.substring(0,z),u.substring(z+1,u.length),b,g),z=u.selector,i=u.eventName,m=u.isGlobal,w=u.isBindRequested;s[z]||(s[z]={});s[z][i]||(s[z][i]={});s[z][i][m]||(s[z][i][m]={});s[z][i][m][w]?e(Jb,[b.__name,z,i],{controllerDef:b}):s[z][i][m][w]=1;q[g]=u}else Ra(g,za)&&b[g]&&!I(b[g])?j.push(g):Ra(g,gb)&&b[g]&&!I(b[g])?d.push(g):I(b[g])?f.push(g):h.push(g);return c}function kb(){this.logicProperties=[];this.functionProperties=[]}function lb(a){var b=
new kb,c=b.functionProperties,d=b.logicProperties,l;for(l in a)a.hasOwnProperty(l)&&Ra(l,gb)?d.push(l):I(a[l])&&c.push(l);return b}function ab(b,c){function d(b,c,l){c=c.__logicContext.waitingPromises=c.__logicContext.waitingPromises||[];-1===a.inArray(b,c)&&(c.push(b),b.done(l))}function l(f){function h(){if(!f.__logicContext.isCalledReady){var l=!0;t(f,function(a){return l=a.__logicContext.isReady});if(l){var q=I(f.__ready)&&f.__ready();f.__logicContext.isCalledReady=!0;vb(q)?(e.push(q),q.done(function(){f.__logicContext.isReady=
!0;e.splice(a.inArray(q,e),1);f.__logicContext.waitingPromises=null;f===b&&c.resolveWith(f)})):(f.__logicContext.isReady=!0,f.__logicContext.waitingPromises=null,f===b&&c.resolveWith(f))}else for(var j=0,g=e.length;j<g;j++)d(e[j],f,h)}}f.__logicContext.isReady=!1;f.__logicContext.isCalledReady=!1;t(f,l);h()}var e=[];l(b)}function bb(a,b){if(a===b)return!0;var c=pa(a),d=pa(b);if(!c&&!d)return!1;c=c?a.toArray():[a];d=d?b.toArray():[b];if(c.length!==d.length)return!1;for(var l=0,e=c.length;l<e;l++)if(c[l]!==
d[l])return!1;return!0}function U(a,b){(!a||!a.rootElement)&&e(Kb,b)}function aa(a,b){(!a||na(a))&&e(Lb,b)}function Sa(b){var c=b.bindTarget,d=b.eventName,l=b.handler;c&&typeof c.nodeType!==la||ob(c)||pa(c)?a(c).bind(d,l):!c||!c.addEventListener?b.isBindCanceled=!0:(c.addEventListener(d,l),b.isNativeBind=!0)}function ia(a,b){b.parentController=a;a.__controllerContext.childControllers.push(b);b.__controllerContext.isRoot=!1;if(a.__controllerContext.isExecutedConstruct){var c=a.rootController;A(b,function(a){a.rootController=
c})}}function Z(a){this.__controller=a;c.u.obj.getByPath("h5.core.view")&&(this.__view=c.core.view.createView())}function Wa(a,b,d,l,e){for(var f=0,h=mb.length;f<h;f++)mb[f](this);this.__name=b;this.__templates=null;this.rootElement=a;this.__controllerContext={executeListeners:!0,isRoot:e,boundHandlers:[],controllerDef:d};this.__controllerContext.args=l?l:null;this.isReady=this.isPostInit=this.isInit=!1;this.readyPromise=this.postInitPromise=this.initPromise=this.preInitPromise=this.parentController=
this.rootController=null;this.log=c.log.createLogger(b);this.view=new Z(this)}function ka(){this.rootElement=document;this.controllers=[];a(document).bind(wb,function(a,b){null==b.target&&(b.target=document);b.indicator=Xa(this,b);a.stopPropagation()})}function xb(){this._init()}function cb(b,c,d,l){var f=!l||!l.isInternal;if(!f&&na(l.rootController))return null;var h=c.__name;(!v(h)||0===a.trim(h).length)&&!Na(c)&&e(Ka,null,{controllerDefObj:c});d&&!a.isPlainObject(d)&&e(Da,[h],{controllerDefObj:c});
c.__controllerContext&&e(db,null,{controllerDefObj:c});var q=xa.get(h);q||y(f,b,c,d,h);f&&r(c,h);q||(q=jb(c),xa.register(h,q));f&&C(b,c,h);var j=new Wa(b?a(b).get(0):null,h,c,d,f),g=f?j:l.rootController,u=ra(),h=u.promise().fail(eb),z=ra(),i=z.promise().fail(eb),m=ra(),w=m.promise().fail(eb),Y=ra(),L=Y.promise(),n=l&&l.async;!1===n&&(u.resolve(),z.resolve(),m.resolve(),Y.resolve());f||L.fail(eb);b=j.__controllerContext;b.cache=q;b.preInitDfd=u;b.initDfd=z;b.postInitDfd=m;b.readyDfd=Y;j.preInitPromise=
h;j.initPromise=i;j.postInitPromise=w;j.readyPromise=L;b.childControllers=[];for(var k=f?[]:l.promisesForTriggerInit,z=0,i=q.logicProperties.length;z<i;z++)m=q.logicProperties[z],h=c[m],Na(h)?(w=h.resolve("namespace"),k.push(w),w.done(function(b,c){return function(d){d=nb(d);j[b]=d;k.splice(a.inArray(c,k),1);k.push(d.readyPromise);d.readyPromise.done(function(b){return function(){k.splice(a.inArray(b,k),1)}}(d.readyPromise))}}(m,w))):j[m]=nb(h);h=a.extend(!0,{},c);c=c.__templates;z=ra();i=z.promise();
Na(c)||c&&0<c.length?T(j,z,c):z.resolve();i.done(function(){s(j)||u.resolveWith(j)}).fail(function(a){u.rejectWith(j,[a]);ja(j,null,a)});z=0;for(i=q.eventHandlerProperties.length;z<i;z++)m=q.eventHandlerProperties[z],j[m]=B(h,m,!0);z=0;for(i=q.functionProperties.length;z<i;z++)m=q.functionProperties[z],j[m]=B(h,m);z=0;for(i=q.otherProperties.length;z<i;z++)m=q.otherProperties[z],j[m]=h[m];b.managed=l&&l.managed;try{if(j.__construct&&j.__construct({args:j.__controllerContext.args}),s(j))return null}catch(ma){return ja(g,
ma),null}f?(j.rootController=j,j.parentController=null):(j.parentController=l.parentController,j.rootController=l.rootController);if(j.__controllerContext.childControllers){z=0;l=j.__controllerContext.childControllers;for(i=l.length;z<i;z++)l[z].rootController=j.rootController}j.__controllerContext.isExecutedConstruct=!0;z=0;for(i=q.childControllerProperties.length;z<i;z++)if(m=q.childControllerProperties[z],l=h[m],Na(l))w=l.resolve("namespace"),k.push(w),w.done(function(b,c){return function(l){l=
cb(null,a.extend(true,{},l),d,{isInternal:true,parentController:j,rootController:g,promisesForTriggerInit:k,async:n});if(l==null)return null;j[b]=l;j.__controllerContext.childControllers.push(l);k.splice(a.inArray(c,k),1)}}(m,w));else{l=cb(null,a.extend(!0,{},h[m]),d,{isInternal:!0,parentController:j,rootController:g});if(null==l)return null;j.__controllerContext.childControllers.push(l);j[m]=l}if(f){var M=function(){k.length===0?D(j,n):ba(k,M)};ba(k,M)}return j}function nb(b){function d(b,l){var f=
b.__name;(!v(f)||0===a.trim(f).length)&&e(Mb,null,{logicDefObj:b});b.__logicContext&&e(Nb,null,{logicDefObj:b});var h=xa.get(f);h||(l&&o(b),h=lb(b));for(var g=a.extend(!0,{},b),s=h.functionProperties,z=0,m=s.length;z<m;z++){var i=s[z];g[i]=B(g,i)}g.deferred=ra;g.log=c.log.createLogger(f);g.__logicContext={logicDef:b};g.own=q;g.ownWithOrg=u;xa.register(f,h);I(g.__construct)&&g.__construct();f=h.logicProperties;z=0;for(m=f.length;z<m;z++)i=f[z],h=g[i],Na(h)?(h=h.resolve(),j.push(h),h.done(function(b,
c){return function(l){g[b]=d(l);j.splice(a.inArray(c,j),1)}}(i,h))):g[i]=d(h);return g}function l(){0===j.length?ab(g,f):ba(j,l)}var f=c.async.deferred(),h=f.promise(),j=[],g=d(b,!0);g.readyPromise=h;ba(j,l);return g}var hb="http://www.w3.org/2000/svg",Ha={SELECTOR_TYPE_LOCAL:1,SELECTOR_TYPE_GLOBAL:2,SELECTOR_TYPE_OBJECT:3},za="Controller",gb="Logic",Aa="h5trackstart",Ga="h5trackmove",ya="h5trackend",ua="rootElement",wb="triggerIndicator",ub=/^\{.*\}$/,Oa=/^\[.*\]$/,sa="{h5view ",Qa=6001,l=6003,z=
6004,Ka=6006,Da=6007,db=6008,Db=6009,Eb=6010,Cb=6011,Ib=6012,Jb=6013,Mb=6017,Nb=6018,Hb=6029,rb=6030,Fb=6033,sb=6034,Kb=6035,Lb=6036,Gb=6038,ra=c.async.deferred,vb=c.async.isPromise,tb=c.u.str.startsWith,Ra=c.u.str.endsWith,Ea=c.u.str.format,Ia=c.u.obj.argsToArray,pa=c.u.obj.isJQueryObject,Na=c.res.isDependency,eb=function(){},Ca,xa,Ba=[],Ja=[],qa="",Fa=function(){var a=document.createElement("div");return typeof a.style.touchAction!==la?(qa="touchAction",!0):typeof a.style.msTouchAction!==la?(qa=
"msTouchAction",!0):!1}(),mb=[],Ua=function(){var b=null;return function(){if(null!=b)return b;var c=document.createElementNS(hb,"svg");c.setAttribute("width",1);c.setAttribute("height",1);var d=document.createElementNS(hb,"rect");d.setAttribute("x",1);d.setAttribute("y",1);d.setAttribute("width",1);d.setAttribute("height",1);k(d);a(function(){document.body.appendChild(c);var a=c.getBoundingClientRect().top;c.appendChild(d);b=a===c.getBoundingClientRect().top;document.body.removeChild(c)});return b}}();
a.extend(i.prototype,Ha);a.extend(Z.prototype,{get:function(a,b){U(this.__controller,"view#get");return oa(a,this.__controller).get(a,b)},update:function(a,b,c){U(this.__controller,"view#update");a=V(a,this.__controller);return oa(b,this.__controller).update(a,b,c)},append:function(a,b,c){U(this.__controller,"view#append");a=V(a,this.__controller);return oa(b,this.__controller).append(a,b,c)},prepend:function(a,b,c){U(this.__controller,"view#prepend");a=V(a,this.__controller);return oa(b,this.__controller).prepend(a,
b,c)},load:function(a){U(this.__controller,"view#load");return this.__view.load(a)},register:function(a,b){U(this.__controller,"view#register");this.__view.register(a,b)},isValid:function(a){U(this.__controller,"view#isValid");return this.__view.isValid(a)},isAvailable:function(a){U(this.__controller,"view#isAvailable");return oa(a,this.__controller).isAvailable(a)},clear:function(a){U(this.__controller,"view#clear");this.__view.clear(a)},getAvailableTemplates:function(){U(this.__controller,"view#getAvailableTemplates");
return this.__view.getAvailableTemplates()},bind:function(b,c){U(this.__controller,"view#bind");var d=b;if(v(b)&&0===b.indexOf("h5view#")){for(var l=Za(this.__controller.rootElement,b.slice(7)),d=l.nodeValue,d=d.slice(d.indexOf("}")+1),e=a("<div>").append(d),d=[],f=e[0].childNodes,h=0,j=f.length;h<j;h++)d.push(f[h]);e.empty();e=document.createDocumentFragment();h=0;for(j=d.length;h<j;h++)e.appendChild(d[h]);l.parentNode.insertBefore(e,l.nextSibling)}return this.__view.bind(d,c)}});a.extend(Wa.prototype,
{$find:function(b){aa(this,"$find");U(this,"$find");return a(this.rootElement).find(b)},deferred:function(){aa(this,"deferred");return ra()},trigger:function(b,c){aa(this,"trigger");U(this,"trigger");var d=v(b)?a.Event(b):b;a(this.rootElement).trigger(d,c);return d},own:function(){aa(this,"own");return q.apply(this,Ia(arguments))},ownWithOrg:function(){aa(this,"ownWithOrg");return u.apply(this,Ia(arguments))},bind:function(a,b){aa(this,"bind");this.__controllerContext.isRoot||e(6031);this.rootElement=
M(a,this);this.view.__controller=this;ib(this,b?b:null);D(this);return this},unbind:function(){aa(this,"unbind");U(this,"unbind");this.__controllerContext.isRoot||e(6031);this.__controllerContext.isExecutedConstruct||e(6037);try{Ya(this)}catch(a){ja(this,a)}},dispose:function(){aa(this,"dispose");this.__controllerContext.isRoot||e(6031);return ja(this)},triggerIndicator:function(b){aa(this,"triggerIndicator");U(this,"triggerIndicator");var c={indicator:null};b&&a.extend(c,b);a(this.rootElement).trigger(wb,
[c]);return c.indicator},indicator:function(a){aa(this,"indicator");U(this,"indicator");return Xa(this,a)},enableListeners:function(){aa(this,"enableListeners");H(this,!0)},disableListeners:function(){aa(this,"disableListeners");H(this,!1)},throwError:function(a,b){aa(this,"throwError");var c=Ia(arguments);c.unshift(null);this.throwCustomError.apply(this,c)},throwCustomError:function(a,b,c){aa(this,"throwCustomError");2>arguments.length&&e(6005);var d=null;b&&v(b)?d=Error(Ea.apply(null,Ia(arguments).slice(1))):
(d=Error(),d.detail=b);d.customType=a;throw d;},on:function(a,b,c){aa(this,"on");U(this,"on");a=Y(a,b,this);c=j(this,a,c);a=0;for(b=c.length;a<b;a++)m(c[a],N(this.rootElement))},off:function(a,b,c){aa(this,"off");U(this,"off");for(var d=Y(a,b,this),a=this.__controllerContext.boundHandlers,l=null,e=d.bindTarget,b=d.eventName,f=d.selector,h=d.isGlobal,d=d.isBindRequested,j=0,q=a.length;j<q;j++){var g=a[j];if(e){if(bb(e,g.bindTarget)&&b===g.eventName&&g.originalHandler===c){l=g;break}}else if(f===g.selector&&
h===g.isGlobal&&d===g.isBindRequested&&c===g.originalHandler){l=g;break}}l&&E(l,N(this.rootElement))},manageChild:function(b){aa(this,"manageChild");if(L(this))e(6041);else if(!b||!b.__controllerContext)e(6039);else if(L(b))e(6040);else{b.rootController!==b&&e(6042);ia(this,b);var c=Ca.controllers,b=a.inArray(b,c);-1!=b&&c.splice(b,1)}},unmanageChild:function(b,c){aa(this,"unmanageChild");if(L(this))e(6043);else if(b.parentController!==this)e(6044);else if(c=!1===c?!1:!0,!c&&!b.rootElement)e(6045);
else{b.parentController=null;b.rootController=b;b.__controllerContext.isRoot=!0;var d=this.__controllerContext.childControllers,l=a.inArray(b,d);-1!==l&&d.splice(l,1);c?b.dispose():(Ca.controllers.push(b),d=this.__controllerContext.waitingPromisesManagerMap,l=b.__controllerContext.waitingPromisesManagerMap,d&&(d.__postInit&&d.__postInit.remove(b.postInitPromise),d.__ready&&d.__ready.remove(b.readyPromise)),l&&l.__init&&l.__init.remove(this.initPromise),this.rootController.__controllerContext.triggerPostInitExecuted?
this.rootController.__controllerContext.triggerReadyInitExecuted||ca(b):ga(b))}}});c.mixin.eventDispatcher.mix(ka.prototype);a.extend(ka.prototype,{getAllControllers:function(){return this.controllers},getControllers:function(b,c){for(var d=c&&c.deep,l=c&&c.name?P(c.name):null,e=a(b)[0],f=this.controllers,h=[],j=0,q=f.length;j<q;j++){var g=f[j];!(l&&-1===a.inArray(g.__name,l))&&g.rootElement&&(e===g.rootElement?h.push(g):d&&N(e)===N(g.rootElement)&&a.contains(e,g.rootElement)&&h.push(g))}return h}});
a.extend(xb.prototype,{get:function(a){return this._cacheMap[a]},register:function(a,b){this._cacheMap[a]=b},clear:function(a){delete this._cacheMap[a]},clearAll:function(){this._cacheMap={}},_init:function(){this._cacheMap={}}});xa=new xb;Ca=new ka;c.u.obj.expose("h5.core",{controllerManager:Ca,definitionCacheManager:{clear:function(a){xa.clear(a)},clearAll:function(){xa.clearAll()}}});var Pa=null;ha.controllerInternal=cb;ha.addControllerInstantiationHook=function(a){mb.push(a)};ha.isDisposing=s;
c.u.obj.expose("h5.core",{controller:function(a,b,c){2>arguments.length&&e(6032);return cb(a,b,c)},logic:nb,expose:function(a){var b=a.__name;b||e(6019,null,{target:a});var d=b.lastIndexOf(".");if(-1===d)window[b]=a;else{var l=b.substr(0,d),b=b.substr(d+1,b.length),d={};d[b]=a;c.u.obj.expose(l,d)}},childFrom:function(a){return new f(a)}})})();(function(){function k(a){return a instanceof Date}function y(a){return function(c){for(var b=a.queries,e=0,f=b.length;e<f;e++){var g=b[e],i=g.compareFunction;
if(!i(c[g.prop],g.queryValue))return!1}b=a.userFunctions;e=0;for(f=b.length;e<f;e++)if(!b[e](c))return!1;b=a.nestedCriterias;e=0;for(f=b.length;e<f;e++)if(!b[e].match(c))return!1;return!0}}function r(a){return function(c){for(var b=a.queries,e=0,f=b.length;e<f;e++){var g=b[e],i=g.compareFunction;if(i(c[g.prop],g.queryValue))return!0}b=a.userFunctions;e=0;for(f=b;e<f;e++)if(!b[e](c))return!0;b=a.nestedCriterias;e=0;for(f=b.length;e<f;e++)if(b[e].match(c))return!0;return!1}}function o(c){var d=c._criteria.match,
b=c.result;return function(e){for(var f=e.removed,g=e.created,e=e.changed,i=!0,k=0,n=f.length;k<n;k++){var p=a.inArray(f[k],b._src);-1!==p&&b.splice(p,1)}k=0;for(n=e.length;k<n;k++)p=a.inArray(e[k].target,b._src),i=!1,d(e[k].target.get())?-1===p&&b.push(e[k].target):-1!==p&&b.splice(p,1);k=0;for(n=g.length;k<n;k++)d(g[k].get())&&(i=!1,b.push(g[k]));c._compareFunction&&!i&&b.sort(c._compareFunction)}}function C(c){var d=[],b=[],f=[],i={queries:d,nestedCriterias:b,userFunctions:f},n;for(n in c)if(n!==
B)if(a.isPlainObject(c[n]))b.push(C(c[n]));else if(I(c[n]))f.push(c[n]);else{var o=c[n],v=F(o)?o[0]:o,A=null,A=v instanceof RegExp?g:k(v)?p:x,ta=a.trim(n.replace(/ +/g," ")).split(" "),O=ta[1]||"=";(A=A[O])||e(t,[O,a.type(v)]);d.push({prop:ta[0],queryValue:o,compareFunction:A})}i.match="or"===c[B]?r(i):y(i);return i}function f(a){return function(c,b){var e=c.get(a),f=b.get(a);return e>f?1:e<f?-1:0}}function i(a){return function(c,b){var e=c.get(a),f=b.get(a);return e>f?-1:e<f?1:0}}function n(a){this.result=
c.core.data.createObservableArray();this._model=a;this._isLive=!1}var B="__op",x={"=":function(a,c){return a===c},"!=":function(a,c){return a!==c},"<":function(a,c){return a<c},">":function(a,c){return a>c},"<=":function(a,c){return a<=c},">=":function(a,c){return a>=c},between:function(a,c){var b=c[1];return c[0]<=a&&a<=b},"!between":function(a,c){var b=c[1];return a<c[0]||b<a},"in":function(c,d){return-1!==a.inArray(c,d)},"!in":function(c,d){return-1===a.inArray(c,d)}},g={"=":function(a,c){return c.test(a)},
"!=":function(a,c){return!c.test(a)}},p={"=":function(a,c){return!k(a)?!1:a.getTime()===c.getTime()},"!=":function(a,c){return!k(a)?!0:a.getTime()!==c.getTime()},"<":function(a,c){return!k(a)?!1:a.getTime()<c.getTime()},">":function(a,c){return!k(a)?!1:a.getTime()>c.getTime()},"<=":function(a,c){return!k(a)?!1:a.getTime()<=c.getTime()},">=":function(a,c){return!k(a)?!1:a.getTime()>=c.getTime()},between:function(a,c){if(!k(a))return!1;var b=c[0].getTime(),e=c[1].getTime(),f=a.getTime();return b<=f&&
f<=e},"!between":function(a,c){if(!k(a))return!1;var b=c[0].getTime(),e=c[1].getTime(),f=a.getTime();return f<b||e<f},"in":function(a,c){if(!k(a))return!1;for(var b=a.getTime(),e=0,f=c.length;e<f;e++)if(b===c[e].getTime())return!0;return!1},"!in":function(a,c){if(!k(a))return!0;for(var b=a.getTime(),e=0,f=c.length;e<f;e++)if(b===c[e].getTime())return!1;return!0}},t=1,A={};A[t]='演算子"{0}"で"{1}"型の値を比較することはできません';A[2]="ORDER BY句の指定が不正です。指定されたキー({0})は存在しません";A[3]='ORDER BY句の指定が不正です。指定されたorder句:{0} "key名 ASC"または"key名 DESC"またはソート関数を指定してください';
zb(A);a.extend(n.prototype,{setCriteria:function(a){this._criteria=C(a);this._isLive&&this.execute();return this},execute:function(){this._executeDfd=c.async.deferred();var a=this.result;a.copyFrom(null);for(var d in this._model.items){var b=this._model.items[d];this._criteria.match(b.get())&&a.push(b)}this._compareFunction&&a.sort(this._compareFunction);this._executeDfd.resolveWith(this,[a]);return this},onQueryComplete:function(a){this._executeDfd.done(a);return this},setLive:function(){if(!this._isLive)return this._listener=
this._listener||o(this),this._model.addEventListener("itemsChange",this._listener),this._isLive=!0,this},unsetLive:function(){if(this._isLive)return this._model.removeEventListener("itemsChange",this._listener),this._isLive=!1,this},orderBy:function(c){if(I(c))return this._compareFunction=c,this.result.sort(this._compareFunction),this;(!c||!v(c))&&e(3,[c]);var d=c.split(" "),b=a.trim(d[0]);this._model.schema.hasOwnProperty(b)||e(2,[this._model.name,b]);d=d[1]?a.trim(d[1].toUpperCase()):"ASC";"DESC"===
d?this._compareFunction=i(b):"ASC"===d?this._compareFunction=f(b):e(3,[c]);this._isLive&&this.result.sort(this._compareFunction);return this}});Oa={createQuery:function(){return new n(this)}}})();(function(){function k(a){return(a=a&&v(a)?a.match(/^(string|number|integer|boolean|any|enum|@(.+?))((\[\]){0,1})$/):null)?{elmType:a[1],dataModel:a[2],dimension:a[3]?1:0}:{}}function y(b,c){return function Da(b,d){if(!c[b])return!1;for(var l=0,e=c[b].length;l<e;l++)if(-1<a.inArray(c[b][l],d)||Da(c[b][l],
d.concat([b])))return!0;return!1}(b,[])}function r(a){return"number"===typeof a&&isNaN(a)}function o(a,b){return null==a||r(a)||"number"===typeof a||!b&&(a instanceof Number||!(!(v(a)||a instanceof String)||!a.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function C(a,b){return null==a||"number"===typeof a&&parseInt(a)===a||!b&&(a instanceof Number&&parseInt(a)===parseFloat(a)||("string"===typeof a||a instanceof String)&&!!a.match(/^[+\-]{0,1}[0-9]+$/))}function f(b,c,d){function f(){q.push(h.call(this,
arguments));if(d)throw null;}var q=[];try{if(!a.isPlainObject(b))throw f(Ma),null;ka(b.name)||f(ja);var g=b.base,j=null;if(null!=g)if(!v(g)||0!==g.indexOf("@"))f(Ya);else{var i=g.substring(1);c.models[i]?j=c.models[i].schema:f(oa,i)}var u=b.schema;!j&&null==u&&f(na);if(!j&&!a.isPlainObject(u))throw f(s),null;}catch(w){e(da,null,q)}}function i(b,c,d,f){function g(){j.push(h.call(this,arguments));if(f)throw null;}"object"!==typeof b&&e(M);var j=[];try{if(c){var s=!1,i;for(i in b)b[i]&&!0===b[i].id&&
(s&&g(L),s=!0);s||g(ma)}var w={},s=function(a){if(null!=a){t&&g(q,D);p.hasOwnProperty("defaultValue")&&g(pa,D);if(null==a.on)g(u,D);else for(var c=P(a.on),d=0,e=c.length;d<e;d++)if(!b.hasOwnProperty(c[d])){g(u,D);break}"function"!==typeof a.calc&&g(T,D);w[D]=P(a.on)}};i=function(a){t&&null==a&&(a="string");var b={};null!=a&&(v(a)?(t&&"string"!==a&&"integer"!==a&&g(Ha,D),b=k(a),b.elmType?(b.dataModel&&(c||g($a,D,b.dataModel),d.models[b.dataModel]||g(jb,D,b.dataModel)),"enum"===b.elmType&&null==p.enumValue&&
g(kb,D)):g($a,D,a)):g(Y,D))};var m=function(b,c){if(null!=b)if(a.isPlainObject(b)){for(var d in b){var e=b[d];if(null!=e)switch(d){case "notNull":!0!==e&&!1!==e?g(ab,D,d):t&&!e&&g(ha,D,d,e);break;case "min":case "max":switch(c.elmType){case "integer":(v(e)||!C(e)||r(e))&&g(bb,D,d);break;case "number":(v(e)||v(e)||!o(e)||Infinity===e||-Infinity===e||r(e))&&g(bb,D,d);break;default:g(U,D,d,c.elmType)}break;case "minLength":case "maxLength":switch(c.elmType){case "string":v(e)||!C(e)||r(e)||0>e?g(Sa,
D,d):t&&"maxLength"===d&&0===e&&g(ha,D,d,e);break;default:g(U,D,d,c.elmType)}break;case "notEmpty":switch(c.elmType){case "string":!0!==e&&!1!==e?g(ab,D,d):t&&!e&&g(ha,D,d,e);break;default:g(U,D,d,c.elmType)}break;case "pattern":switch(c.elmType){case "string":"regexp"!==a.type(e)&&g(aa,D,d);break;default:g(U,D,d,c.elmType)}}}b.notEmpty&&0===b.maxLength&&g(S,D,"notEmpty","maxLength");null!=b.min&&null!=b.max&&b.min>b.max&&g(S,D,"min","max");null!=b.minLength&&null!=b.maxLength&&b.minLength>b.maxLength&&
g(S,D,"minLength","maxLength")}else g(lb,D)},n=function(b,c){null!=b&&("enum"!==c.elmType&&g(ba,D),(!F(b)||0===b.length||-1<a.inArray(null,b)||-1<a.inArray(void 0,b))&&g(X,D))},D;for(D in b){var p=null==b[D]?{}:b[D],t=c&&!!p.id;ka(D)||g(Za,D);s(p.depend);i(p.type);var ga={},x=t&&null==x?"string":p.type;v(x)&&(ga=k(x));m(p.constraint,ga);n(p.enumValue,ga);t&&p.hasOwnProperty("defaultValue")&&g(Z,D)}for(var E in w)y(E,w)&&g(qa,E)}catch(B){e(ca,null,j)}return!0}function n(a,b){var c=[];try{for(var d in a){var f=
a[d];if(f&&(f.hasOwnProperty("defaultValue")||!f.type||!("array"===f.type||k(f.type).dimension))&&f.hasOwnProperty("defaultValue")){var g=f.defaultValue;b[d](g).length&&pushErrorReason(ia,d,g)}}return!0}catch(q){e(ca,null,c)}}function B(a,b,c){var d={},e;for(e in a){var f=d,q=e,j;j=c;var h=a[e]||{},s=[],i=null,u=0,i=h.type,w=h.constraint||{};b&&h.id&&(i=i||"string",w.notNull=!0,"string"===i&&(w.notEmpty=!0));i&&(u=k(i),i=u.elmType,u=u.dimension,s.push(g(i,{manager:j,enumValue:h.enumValue})));w&&s.push(x(w));
j=p({checkFuncs:s,dimension:u});f[q]=j}return d}function x(a){return function(b){var c=[];a.notNull&&null==b&&c.push({notNull:a.notNull});a.notEmpty&&!b&&c.push({notEmpty:a.notEmpty});if(null==b)return c;null!=a.min&&b<a.min&&c.push({min:a.min});null!=a.max&&a.max<b&&c.push({max:a.max});null!=a.minLength&&b.length<a.minLength&&c.push({minLength:a.minLength});null!=a.maxLength&&a.maxLength<b.length&&c.push({maxLength:a.maxLength});null!=a.pattern&&!b.match(a.pattern)&&c.push({pattern:a.pattern});return c}}
function g(b,c){var d=[{type:b}];switch(b){case "number":return function(a,b){return o(a,b)?[]:d};case "integer":return function(a,b){return C(a,b)?[]:d};case "string":return function(a,b){return null==a||v(a)||!b&&a instanceof String?[]:d};case "boolean":return function(a,b){return null==a||"boolean"===typeof a||!b&&a instanceof Boolean?[]:d};case "enum":return function(b){var e;a:if(e=c.enumValue,r(b)){for(var b=0,l=e.length;b<l;b++)if(r(e[b])){e=!0;break a}e=!1}else e=null===b||-1<a.inArray(b,
e);return e?[]:d};case "any":return function(){return[]}}var e=b.match(/^@(.+?)$/)[1],f=c.manager;return function(a){var b=f.models[e];return!b||"object"!==typeof a&&null!=a?d:null==a||b.has(a)?[]:d}}function p(a){var b=a.checkFuncs;if(!b||0===b.length)return function(){return[]};var d=a.dimension||0;return function(a,e){function l(a,g){if(!g){for(var q=0,j=b.length;q<j;q++){var h=b[q](a,e);if(h.length)return f=f.concat(h),!1}return!0}if(null==a)return!0;if(!F(a)&&!c.core.data.isObservableArray(a))return f.push({dimension:d}),
!1;q=0;for(j=a.length;q<j;q++)if(!l(a[q],g-1))return!1;return!0}var f=[];l(a,d);return f}}function t(a,b){a._values={};a._nullProps={};for(var c in b)if(b[c]&&A(b[c].type)){var d=W();d.relatedItem=a;a._values[c]=d;a._nullProps[c]=!0}}function A(a){return!a?!1:-1!==a.indexOf("[]")}function h(){return{code:arguments[0]}}function d(b,c,d,f){function g(c){for(var c=P(h[c].depend.on),d=0,e=c.length;d<e;d++)if(-1===a.inArray(c[d],b._realProperty)&&-1!==a.inArray(c[d],j))return!1;return!0}function q(b,c){for(var d=
0,e=c.length;d<e;d++){var f=s[c[d]];if(f)for(var l=0,g=f.length;l<g;l++){var j=f[l];-1===a.inArray(j,b)&&b.push(j)}}}var j=[],h=b.schema||b._model.schema,s=b._dependencyMap,i={};for(f?j=b._dependProps.slice():q(j,P(d));0!==j.length;){for(var d=[],f=0,u=j.length;f<u;f++){var w=j[f];if(g(w)){var m=h[w].depend.calc.call(b,c);0!==b._validateItemValue(w,m,!0).length&&e(Xa,[b._model?b._model.name:za,w,m]);i[w]={oldValue:b._values[w],newValue:m};h[w]&&A(h[w].type)?m?(b._values[w].copyFrom(m),b._nullProps[w]=
!1):(b._values[w].copyFrom([]),b._nullProps[w]=!0):b._values[w]=m}else d.push(w)}q(d,j);j=d}return i}function b(a,b,c,d){for(var f in c){f in a||e(ib,[d?d.name:za,f]);var g=c[f];if(!a[f]||!A(a[f].type)||c.hasOwnProperty(f))g=b(f,g,d&&d._idKey===f),0<g.length&&e(D,[d?d.name:za,f],g)}}function j(b,f,g,q){var j=b.schema||b._model.schema,h=[],s;for(s in f)if(!(g&&-1!==a.inArray(s,g))){var i=b._values[s],u=f[s];if(j[s]&&j[s].depend)i!==u&&e(ga,[b._model?b._model.name:za,s]);else{var w=j[s]&&j[s].type;
A(w)&&(null==u?(u=[],b._nullProps[s]=!0):b._nullProps[s]=!1);if(w&&w.match(/string|number|integer|boolean/)){var m=u;if(F(m)){for(var m=m.slice(0),u=0,k=m.length;u<k;u++)m[u]=m[u]&&"object"===typeof m[u]?m[u]&&m[u].valueOf&&m[u].valueOf():m[u];u=m}else u=m&&"object"===typeof m&&m.valueOf?m.valueOf():m}if(null!=u&&w&&w.match(/number|integer/)&&"number"!==typeof u)if(F(u)||c.core.data.isObservableArray(u)){m=0;for(k=u.length;m<k;m++)null!=u[m]&&o(u[m])&&(u[m]=parseFloat(u[m]))}else null!=u&&(u=parseFloat(u));
if(!A(w)||!i||!i.equals(u))i===u||r(i)&&r(u)||(w&&-1!==w.indexOf("[]")&&c.core.data.isObservableArray(i)&&(i=i.toArray()),h.push({p:s,o:i,n:u}))}}if(h.length){f={};g=[];m=0;for(s=h.length;m<s;m++)i=h[m],j[i.p]&&A(j[i.p].type)?i.n&&b._values[i.p].copyFrom(i.n):b._values[i.p]=i.n,f[i.p]={oldValue:i.o,newValue:b.get(i.p)},g.push(i.p);j={type:!0===q?"create":"change",target:b,props:f};a.extend(f,d(b,j,g,q));return j}}function m(a){var b=a._manager,a=a.name;b._updateLogs||(b._updateLogs={});b._updateLogs[a]||
(b._updateLogs[a]={});return b._updateLogs[a]}function E(a,b,c){if(a._manager)for(var d=m(a),e=0,f=c.length;e<f;e++){var g=c[e],q=g._values[a._idKey];d[q]||(d[q]=[]);d[q].push({type:b,item:g})}}function H(a,b){if(a._manager){var c=m(a),d=b.target._values[a._idKey];c[d]||(c[d]=[]);c[d].push({type:va,ev:b})}}function R(b){var c={},d;for(d in b)if(b.hasOwnProperty(d)){var e=b[d]?b[d].depend:null;if(e)for(var e=P(e.on),f=0,g=e.length;f<g;f++){var q=e[f];c[q]||(c[q]=[]);-1===a.inArray(d,c[q])&&c[q].push(d)}}return c}
function G(b,c){f(b,c,!0);var d;d=(d=b.base)?c.models[d.slice(1)].schema:{};d=a.extend({},d,b.schema);i(d,!0,c,!0);var e=B(d,!0,c);n(d,e,!0);return new wa(d,b,e,c)}function ta(b,c){var d=[],e=[],f=[],g;for(g in b)b[g]&&b[g].depend?e.push(g):d.push(g),b[g]&&b[g].type&&-1!==b[g].type.indexOf("[]")&&f.push(g);g=R(b);var q={},j;for(j in b){var h=b[j];if(!h||!h.depend){var s=null,s=h&&void 0!==h.defaultValue?h.defaultValue:null;q[j]=s}}return{_realProps:d,_dependProps:e,_aryProps:f,_dependencyMap:g,_createInitialValueObj:function(b){if(!b)return a.extend({},
q);var c=a.extend({},q),d;for(d in b)c[d]=b[d];return c},_validateItemValue:function(a,b,d){return c[a](b,d)}}}function O(b,d,f,g){var q=!1,j=["sort","reverse","pop","shift"],h=null;f.addEventListener("changeBefore",function(f){g&&(b._isRemoved||!g._manager)&&e(w,[b._values[g._idKey],f.method]);var s=c.u.obj.argsToArray(f.args);if(-1===a.inArray(f.method,j)){var i=!0;switch(f.method){case "splice":i=!1;s.shift();s.shift();break;case "copyFrom":s=s[0];break;case "set":s.shift()}i&&(f=b._validateItemValue(d,
s),0<f.length&&e(D,d,f))}g?(g._manager&&(f=g._manager,s=g.name,f._oldValueLogs||(f._oldValueLogs={}),f._oldValueLogs[s]||(f._oldValueLogs[s]={}),f=f._oldValueLogs[s],s=b._values[g._idKey],f[s]||(f[s]={}),f[s][d]||(f[s][d]=b._values[d].toArray())),(q=g._manager?g._manager.isInUpdate():!1)||g._manager.beginUpdate()):h=b._values[d].toArray()});f.addEventListener("change",function(a){if(!(b._isInSet||null===a.method)){var c={type:"change",target:b,props:{}};c.props[d]={};g?(H(g,c),q?a.stopImmediatePropagation():
(g._manager._isArrayPropChangeSilentlyRequested=!0,g._manager.endUpdate(),g._manager._isArrayPropChangeSilentlyRequested=!1)):f.equals(h)||(c.props[d]={oldValue:h,newValue:b._values[d]},b.dispatchEvent(c))}})}function ea(a){ka(a)||e(fa);this.models={};this.name=a;this._updateLogs=null;this._isArrayPropChangeSilentlyRequested=!1}function wa(a,b,c,d){this.items={};this.size=0;this.name=b.name;this._manager=d;for(var e in a)a[e]&&a[e].id&&(this._idKey=e);this._idType=(b=a[this._idKey].type)?"string"===
b?N:Q:N;this.schema=a;this._itemConstructor=fb(a,c,this);d.models[this.name]=this}function fb(d,e,f){function g(a){t(this,d,q,a);a=q._createInitialValueObj(a);b(d,q._validateItemValue,a,f);j(this,a,null,!0);for(var a=q._aryProps,c=0,e=a.length;c<e;c++)O(this,a[c],this.get(a[c]),f)}var q=ta(d,e);f._schemaInfo=q;c.mixin.eventDispatcher.mix(g.prototype);a.extend(g.prototype,q,Aa,{_model:f,_isRemoved:!1,getModel:function(){return this._isRemoved?null:this._model}});return g}function V(){}function $(){this.length=
0;this._src=[]}function W(){return new $}function J(a){return a&&a.constructor===$?!0:!1}var N="string",Q="number",fa=15E3,da=15001,w=15005,M=15008,ca=15009,D=15011,ga=15012,ib=15013,Xa=15016,Ma=15900,ja=15901,Ya=15902,oa=15903,na=15904,s=6,L=15800,ma=15801,Za=15802,q=15803,u=15804,T=15805,Y=15806,$a=15807,jb=15808,kb=15809,lb=15810,ab=15811,bb=15812,U=15813,aa=15814,Sa=15815,S=15816,ba=15817,X=15818,Z=15819,ia=15820,ha=15821,pa=15822,qa=15823,Ha=15824,za="n/a",va=2,Aa={get:function(b){if(0===arguments.length)return a.extend({},
this._values);var c=this._model;if(!(c?c.schema:this.schema).hasOwnProperty(b))e(15014,[c?c.name:za,b]);return this._values[b]},set:function(a){var c=a;2===arguments.length&&(c={},c[arguments[0]]=arguments[1]);var d=this._model;d&&(this._isRemoved||!d._manager)&&e(w,[this._values[this._model._idKey],"set"],this);if(d)d._idKey in c&&c[d._idKey]!==this._values[d._idKey]&&e(15003,[d.name,this._idKey]),b(d.schema,d._schemaInfo._validateItemValue,c,d);else{var f=this.validate(c);if(f)throw f;}var f=null,
g=d?d._manager.isInUpdate():!1;d&&!g&&d._manager.beginUpdate();this._isInSet=!0;f=j(this,c);this._isInSet=!1;d?(f&&H(d,f),g||d._manager.endUpdate()):f&&this.dispatchEvent(f)},regardAsNull:function(a){return this._isArrayProp(a)?!0===this._nullProps[a]:null===this._values[a]},_isArrayProp:function(a){var b=this._model?this._model.schema:this.schema;return b[a]&&b[a].type&&-1<b[a].type.indexOf("[]")?!0:!1}};c.mixin.eventDispatcher.mix(ea.prototype);a.extend(ea.prototype,{createModel:function(b){(!b||
"object"!==typeof b)&&e(da,null,[h(Ma)]);if(!F(b))return this.models[b.name]?this.models[b.name]:G(b,this);var c=b.length;c||e(da,null,[h(Ma)]);for(var d={},f=[],g=0;g<c;g++){var q=b[g].name;if(this.models[q])w[g]=manager.models[b.name];else try{f.push(q);q=[];b[g].base&&q.push(b[g].base.substring(1));for(var j in b[g].schema){var s=b[g].schema[j];if(s){var i=s.type;i&&"@"===i.substring(0,1)&&(i=-1===i.indexOf("[]")?i.substring(1):i.substring(1,i.length-2),q.push(i))}}d[g]={depends:q}}catch(u){e(da)}}for(var w=
{size:0};w.size<c;){j={};s=!1;for(g=0;g<c;g++)if(!d[g].registed){for(var q=d[g].depends,i=0,m=q.length;i<m;i++)if(!this.models[q[i]]){j[q[i]]=!0;break}i===m&&(w[g]=G(b[g],this),w.size++,s=!0,d[g].registed=!0)}if(!s){var g=!0,k;for(k in j)if(-1===a.inArray(k,f)){g=!1;break}g&&e(15004);e(da,null,[h(oa,k)])}}b=[];for(g=0;g<c;g++)b.push(w[g]);return b},dropModel:function(a){if((a=v(a)?a:"object"===typeof a?a.name:null)&&this.models[a]){var b=this.models[a];b._manager=null;delete this.models[a];return b}},
isInUpdate:function(){return null!==this._updateLogs},beginUpdate:function(){this.isInUpdate()||(this._updateLogs={})},endUpdate:function(){if(this.isInUpdate()){var a=!this._isArrayPropChangeSilentlyRequested,b=this._updateLogs,c=this._oldValueLogs;this._oldValueLogs=this._updateLogs=null;var d={},e;for(e in b)if(b.hasOwnProperty(e)){var f;f=this.models[e];var g=b[e],q=[],j=[],h=[],s=[],i=void 0;for(i in g){for(var u=g[i],w=!0,m=[],k=u.length-1;0<=k;k--){var n=u[k],Y=n.type;if(Y===va)m.push(n.ev);
else{a:{for(w=0;w<k;w++){var D=u[w].type;if(1===D||3===D){k=u[w];break a}}k=null}if(1===Y)k&&3===k.type?q.push({id:i,oldItem:k.item,newItem:n.item}):j.push(n.item);else if(k=k&&3===k.type?k.item:k?null:n.item)s.push(k),k.dispatchEvent({type:"remove",model:f});w=!1;break}}if(w&&0<m.length){n={};for(k=m.length-1;0<=k;k--)for(var T in m[k].props)n[T]||(J(f.get(i).get(T))?(Y=c&&c[f.name]&&c[f.name][i]&&c[f.name][i][T],f.get(i).get(T).equals(Y)||(n[T]={oldValue:Y})):n[T]={oldValue:m[k].props[T].oldValue});
k=!1;for(T in n)Y=n[T].oldValue,u=f.get(i).get(T),Y===u||r(Y)&&r(u)?delete n[T]:(k=f.get(i).get(T),a&&J(k)&&k.dispatchEvent({type:"change",method:null,args:null,returnValue:null}),n[T].newValue=k,k=!0);k&&(m={type:"change",target:m[0].target,props:n},h.push(m),m.target.dispatchEvent(m))}}(f=0===j.length&&0===q.length&&0===s.length&&0===h.length?!1:{created:j,recreated:q,removed:s,changed:h})&&(d[e]=f)}a=!1;for(e in d)a=!0,f=d[e],this.models[e].dispatchEvent({type:"itemsChange",created:f.created,recreated:f.recreated,
removed:f.removed,changed:f.changed});d={type:"itemsChange",models:d};a&&this.dispatchEvent(d)}},_dataModelItemsChangeListener:function(a){var b=a.target.manager,c={};c[a.target.name]=a;b.dispatchEvent({type:"itemsChange",models:c})}});c.mixin.eventDispatcher.mix(wa.prototype);a.extend(wa.prototype,{create:function(a){this._manager||e(15006,[this.name,"create"]);var b=this.validate(a,!0);if(b)throw b;(b=this._manager?this._manager.isInUpdate():!1)||this._manager.beginUpdate();for(var c=[],d=P(a),
f=[],g=this._idKey,q=0,h=d.length;q<h;q++){var s=d[q],i=s[g],u=this._findById(i);u?(f.push(u),(i=j(u,s,[g]))&&H(this,i)):(s=new this._itemConstructor(s),this.items[i]=s,this.size++,c.push(s),f.push(s))}0<c.length&&E(this,1,c);b||this._manager.endUpdate();return F(a)?f:f[0]},validate:function(a,c){try{var d=this._idKey,f=P(a);"object"!==typeof a&&!F(a)&&e(15007);if(c)for(var g=0,q=f.length;g<q;g++){var j=f[g],h=j[d];(""===h||null==h)&&e(15002,[this.name,d]);var s=this._schemaInfo._createInitialValueObj(j);
b(this.schema,this._schemaInfo._validateItemValue,s,this)}else for(var g=0,i=f.length;g<i;g++)j=f[g],b(this.schema,this._schemaInfo._validateItemValue,j,this)}catch(u){return u}return null},get:function(a){if(F(a)||c.core.data.isObservableArray(a)){for(var b=[],d=0,e=a.length;d<e;d++)b.push(this._findById(a[d]));return b}return this._findById(a)},remove:function(a){this._manager||e(15006,[this.name,"remove"]);var b=this._manager?this._manager.isInUpdate():!1;b||this._manager.beginUpdate();for(var c=
this._idKey,d=P(a),f=[],g=[],q=0,j=d.length;q<j;q++)if(this.has(d[q])){var h=v(d[q])||C(d[q],!0)?d[q]:d[q]._values[c],s=this.items[h];delete this.items[h];this.size--;g.push(s);s._model&&(s._isRemoved=!0);f.push(s)}else g.push(null);0<f.length&&E(this,3,f);b||this._manager.endUpdate();return F(a)?g:g[0]},removeAll:function(){var a=this.toArray();0<a.length&&this.remove(a);return a},has:function(a){return v(a)||C(a,!0)?!!this._findById(a):"object"===typeof a?null!=a&&I(a.get)&&a===this.items[a.get(this._idKey)]:
!1},getManager:function(){return this._manager},_findById:function(a){a=this.items[a];return typeof a===la?null:a},_dispatchItemsChangeEvent:function(a){a={type:"itemsChange",created:[],recreated:[],removed:[],changed:[a]};this.dispatchEvent(a);this._manager&&(a.target=this,this._manager._dataModelItemsChangeListener(a))},toArray:function(){var a=[],b=this.items,c;for(c in b)b.hasOwnProperty(c)&&a.push(b[c]);return a},createQuery:Oa.createQuery});c.mixin.eventDispatcher.mix(V.prototype);a.extend(V.prototype,
Aa,{validate:function(a){try{var c=a;2===arguments.length&&(c={},c[arguments[0]]=arguments[1]);b(this.schema,this._validateItemValue,c)}catch(d){return d}return null}});c.mixin.eventDispatcher.mix($.prototype);var Ga={equals:function(a){var b=J(a);if(!b&&!F(a))return!1;a=b?a._src:a;b=this.length;if(a.length!==b)return!1;for(var c=0;c<b;c++){var d=this[c],e=a[c];if(!(d===e||r(d)&&r(e)))return!1}return!0},copyFrom:function(a){null==a&&(a=[]);a=J(a)?a._src:a;F(a)||e(15010,[0,a]);a=a.slice(0);a.unshift(0,
this.length);Array.prototype.splice.apply(this,a)},get:function(a){return this[a]},set:function(a,b){this[a]=b},toArray:function(){return this.slice(0)},concat:function(){for(var a=c.u.obj.argsToArray(arguments),b=0,d=a.length;b<d;b++)J(a[b])&&(a[b]=a[b].toArray());return this.concat.apply(this,a)}},ya="concat,join,pop,push,reverse,shift,slice,sort,splice,unshift,indexOf,lastIndexOf,every,filter,forEach,map,some,reduce,reduceRight".split(","),ua;for(ua in Ga)Ga.hasOwnProperty(ua)&&-1===a.inArray(ua,
ya)&&ya.push(ua);var sa=["concat","slice","splice","filter","map"],Ea=["reverse","sort"],Fa="sort,reverse,pop,shift,unshift,push,splice,copyFrom,set".split(",");ua=0;for(var La=ya.length;ua<La;ua++){var Qa=ya[ua];$.prototype[Qa]=function(b){function c(){var e=d.apply(this._src,arguments);if(-1!==a.inArray(b,Ea))e=this;else if(-1!==a.inArray(b,sa)){var f=W();f.copyFrom(e);e=f}return e}var d=Ga[b]?Ga[b]:Array.prototype[b];return-1===a.inArray(b,Fa)?c:function(){if(!this.dispatchEvent({type:"changeBefore",
method:b,args:arguments})){var a=c.apply(this,arguments);this.length=this._src.length;this.dispatchEvent({type:"change",method:b,args:arguments,returnValue:a});return a}}}(Qa)}c.u.obj.expose("h5.core.data",{createManager:function(a,b){ka(a)||e(fa);var d=new ea(a);if(null!=b){""===b&&(b="window");var f={};f[a]=d;c.u.obj.expose(b,f)}return d},createObservableArray:W,createObservableItem:function(a){i(a,!1,null,!0);var c=B(a);n(a,c,!0);var d=new V,c=ta(a,c);t(d,a,c);d.schema=a;for(var e in c)d[e]=c[e];
e=c._createInitialValueObj();b(a,c._validateItemValue,e);j(d,e,null,!0);a=0;for(c=d._aryProps.length;a<c;a++)O(d,d._aryProps[a],d.get(d._aryProps[a]));return d},isObservableArray:J,isObservableItem:function(a){return!(!a||!a.constructor||!a._validateItemValue||I(a.getModel))},createSequence:function(b,c,d){function e(){return h}function f(){var a=h;h+=s;return a}function g(){return h.toString()}function q(){var a=h;h+=s;return a.toString()}function j(){}var h=null!=b?b:1,s=null!=c?c:1,b=1===d?{current:g,
next:q,returnType:1}:{current:e,next:f,returnType:2};b.setCurrent=function(a){h=a};a.extend(j.prototype,b);return new j},SEQ_STRING:1,SEQ_INT:2})})();(function(){function k(e){return c.u.obj.isJQueryObject(e)?e:a(e)}function y(){this.__cachedTemplates={}}var r=c.async.deferred,o={escapeHtml:function(a){return c.u.str.escapeHtml(a)}};a.extend(function(){this._templateMap={}}.prototype,{applyToView:function(a){var c=this._templateMap,e;for(e in c)a.register(e,c[e])},register:function(a,c){this._templateMap[a]=
c},marge:function(c){a.extend(this._templateMap,c._templateMap)},registByElement:function(c){c=a(c);if(0!==c.length){var i=this;c.each(function(){var c=a.trim(this.id),f=a.trim(this.innerHTML);c||e(7002,null,{});i.register(c,f)})}}});a.extend(y.prototype,{load:function(f){var i=r(),k=null;switch(a.type(f)){case "string":a.trim(f)||e(7004);k=[f];break;case "array":k=f;0===k.length&&e(7004);for(var f=0,o=k.length;f<o;f++)v(k[f])?a.trim(k[f])||e(7004):e(7004);break;default:e(7004)}for(var o=[],f=0,x=
k.length;f<x;f++)o.push(c.res.get(k[f]));var g=this;ba(o,function(a){for(var a=F(a)?a:[a],c=[],e,f=0,d=a.length;f<d;f++){for(var b=a[f].templates,j=0,m=b.length;j<m;j++){if(!g.isValid(b[j].content)){e=b[j];break}c.push(b[j])}if(e)break}if(e)try{g.register(e.id,e.content)}catch(k){return k.detail.url=a[f].url,k.detail.path=a[f].path,i.reject(k)}f=0;for(d=c.length;f<d;f++)g.register(c[f].id,c[f].content);i.resolve()},function(a){i.reject(a)});return i.promise()},getAvailableTemplates:function(){var a=
[],c;for(c in this.__cachedTemplates)a.push(c);return a},register:function(c,i){"string"!==a.type(i)?e(7E3,null,{id:c}):(!v(c)||!a.trim(c))&&e(7002,[]);try{var k=new EJS.Compiler(i,"[");k.compile();this.__cachedTemplates[c]=k.process}catch(o){k=o.lineNumber,e(7010,[k?" line:"+k:"",o.message],{id:c})}},isValid:function(a){try{return(new EJS.Compiler(a,"[")).compile(),!0}catch(c){return!1}},get:function(c,i){var k=this.__cachedTemplates;(!v(c)||!a.trim(c))&&e(7002);(k=k[c])||e(7005,c);var r=i?a.extend(!0,
{},i):{},x=r.hasOwnProperty("_h")?new EJS.Helpers(r):new EJS.Helpers(r,{_h:o}),g=null;try{g=k.call(r,r,x)}catch(p){e(7006,p.toString(),p)}return g},update:function(a,c,e){return k(a).html(this.get(c,e))},append:function(a,c,e){return k(a).append(this.get(c,e))},prepend:function(a,c,e){return k(a).prepend(this.get(c,e))},isAvailable:function(a){return!!this.__cachedTemplates[a]},clear:function(c){if(typeof c===la)this.__cachedTemplates={};else{var i=null;switch(a.type(c)){case "string":i=[c];break;
case "array":c.length||e(7002);i=c;break;default:e(7002)}for(var c=0,k=i.length;c<k;c++){var o=i[c];(!v(o)||!a.trim(o))&&e(7002)}c=0;for(k=i.length;c<k;c++)delete this.__cachedTemplates[i[c]]}},bind:function(f,i){var k=null;null==f&&e(7007);F(f)?k=f:(k=a(f),0===k.length&&e(7007),k=k.toArray());(null==i||"object"!==typeof i||F(i)||c.core.data.isObservableArray(i))&&e(7009);return sa.createBinding(k,i)}});var C=new y;C.createView=function(){return new y};a(function(){a('script[type="text/ejs"]').each(function(){var c=
a.trim(this.id),e=a.trim(this.innerHTML);0!==e.length&&c&&(e=new EJS.Compiler(e,"["),e.compile(),C.__cachedTemplates[c]=e.process)})});c.u.obj.expose("h5.core",{view:C})})();(function(){function k(a,b){return!a||a.nodeType!==X?void 0:a.getAttribute(b)}function y(a){if(!a)return null;for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b}function r(a,b,c,d){var e=[],b=P(b);if(!0===d)return o(e,a,b,c),e;for(var a=a.childNodes,d=0,f=a.length;d<f;d++)o(e,a[d],b,c);return e}function o(a,b,c,d){if(b.nodeType===
X){for(var e=0,f=c.length;e<f;e++){var g=b.getAttribute(c[e]);if(typeof d===la){if(null!==g){a.push(b);break}}else if(null!==g&&g==d){a.push(b);break}}if(0<b.childNodes.length){b=b.childNodes;e=0;for(f=b.length;e<f;e++)o(a,b[e],c,d)}}}function v(b,c){for(var b=P(b),d=[],e=0,f=b.length;e<f;e++){var g=b[e];if(g.nodeType===X&&!(!0===c&&(null!=k(g,m)||null!=k(g,E))))for(var h=r(g,j,void 0,!0),i=0,n=h.length;i<n;i++){for(var o=!0,p=h[i];null!=p&&p!==g;p=p.parentNode)if(null!=k(p,m)||null!=k(p,E)){o=!1;
break}o&&d.push(h[i])}}return a(d)}function f(b,c,d){for(var e=[],f=0,g=b.length;f<g;f++){var j=b[f];if(j.nodeType===X){if(!0===d){if(null!=j.getAttribute(c)){e.push(j);continue}if(null!=k(j,m)||null!=k(j,E))continue}for(var h=r(j,c,void 0,!1),i=0,n=h.length;i<n;i++){var p=a(h[i])[0],o=p.parentNode;(null==k(o,m)&&null==k(o,E)||o===j)&&e.push(p)}}}return a(e)}function i(a){return a&&a.addEventListener&&a.getModel&&!F(a)&&!c.core.data.isObservableArray(a)||c.core.data.isObservableItem(a)?!0:!1}function n(a,
b){for(var c=0,d=a.length;c<d;c++){var e=a[c];e.nodeType===X&&e.setAttribute(R,b)}}function B(b,d,f){var g=J++,j=d[0];a(j).empty();if(f){!F(f)&&!c.core.data.isObservableArray(f)&&e($);n(d,g);b._addBindingEntry(f,j,g);c.core.data.isObservableArray(f)&&!b._isWatching(f)&&(d=function(a){b._observableArray_changeListener(a)},b._listeners[b._getContextIndex(f)]=d,f.addEventListener("change",d));var d=k(j,H),d=y(b._getSrcCtxNode(d).childNodes),h=[];b._loopElementsMap[g]=h;for(var g=j.ownerDocument.createDocumentFragment(),
i=f.get?function(a){return f.get(a)}:function(a){return f[a]},m=0,p=f.length;m<p;m++){for(var o=[],r=0,t=d.length;r<t;r++){var s=da(d[r]);o.push(s);g.appendChild(s)}h[m]=o;j.appendChild(g);x(b,o,i(m),!1,!0)}}}function x(a,b,d,f,j){b=P(b);if(f)B(a,b,d);else{f=J++;d&&(("object"!==typeof d||F(d)||c.core.data.isObservableArray(d))&&e($),n(b,f),a._addBindingEntry(d,b,f));var h=i(d);h&&!a._isWatching(d)&&(f=function(b){a._observableItem_changeListener(b)},a._listeners[a._getContextIndex(d)]=f,d.addEventListener("change",
f));v(b,j).each(function(){p(this,d,h)});g(a,b,d,!1,j);g(a,b,d,!0,j)}}function g(a,b,c,d,e){var g=d?"data-h5-loop-context":"data-h5-context";f(b,g,e).each(function(){var b=k(this,g),e=null;c&&(e=i(c)?c.get(b):c[b]);x(a,this,e,d)})}function p(b,c,d){for(var f=k(b,j).split(ea),g=[],h=[],i=[],m=0,n=f.length;m<n;m++){var o=f[m];if(-1===o.indexOf(O))0<a.trim(o).length&&(g.push(null),h.push(null),i.push(a.trim(o)));else{var p=o.split(O),o=a.trim(p[0]),p=a.trim(p[1]),r=null,s=wa.exec(o);s&&(r=s[1],o=/(\S+)[\s\(]/.exec(o)[1]);
0<o.length&&0<p.length&&(g.push(o),h.push(r),i.push(p))}}f=b.tagName.toLowerCase();m=a(b);n=0;for(o=g.length;n<o;n++){var r=g[n],s=h[n],L=i[n],p=null;c&&(p=d?c.get(L):c[L]);null==r&&("input"===f?(r="attr",s="value"):r="text");switch(r){case "text":null==p?m.text(""):m.text(p);break;case "html":null==p?m.html(""):m.html(p);break;case "class":var r=k(b,I),L=(s=null==r)?"":" ",ma=!1;p&&(ma=!RegExp("\\s"+p+"\\s").test(" "+r+" "));m[0].className=(s?"":r)+(ma?L+p:"");break;case "attr":s||e(N);"input"===
f&&"value"===s?null==p?m.val(""):m.val(p):null==p?m.removeAttr(s):m.attr(s,p);break;case "style":s||e(N);null==p?m.css(s,""):m.css(s,p);break;default:e(V)}}}function t(a,b,c){for(var d=0,e=c.length;d<e;d++){var f=c[d];b.removeChild(f);a._removeBinding(f)}}function A(a){for(var a=a.childNodes,b=[],c=0,d=a.length;c<d;c++)b.push(da(a[c]));return b}function h(a,b,c,d,e){for(var f=c.ownerDocument.createDocumentFragment(),g=[],j=0,h=e.length;j<h;j++){var i=A(c);g[j]=i;for(var m=0,k=i.length;m<k;m++)f.appendChild(i[m]);
x(a,i,e[j])}Array.prototype[d].apply(b,g);return f}function d(a,b,c,d,e,f){var g=d.length;if(0!==g){for(var j=d[0],h=j,c=1===g?c.length:h+d[1];h<c;h++){var i=e[h];i&&t(a,b,i)}e.splice(j,d[1]);if(!(2>=g)){h=e.length;h=0===h||0===j?b.firstChild:j>=h?null:e[j][0];c=f.ownerDocument.createDocumentFragment();j=[j,0];for(i=2;i<g;i++){for(var m=A(f),k=0,s=m.length;k<s;k++)c.appendChild(m[k]);x(a,m,d[i]);j.push(m)}b.insertBefore(c,h);Array.prototype.splice.apply(e,j)}}}function b(a,b){void 0!==a.nodeType?
a.nodeType===X&&(this._parent=a.parentNode,this._targets=[a]):(this._parent=a[0].parentNode,this._targets=y(a));this._bindRootId=S++;Q[this._bindRootId]=this;for(var c=[],d=0,e=this._targets.length;d<e;d++){var f=this._targets[d];if(f.nodeType===X){f.setAttribute(G,this._bindRootId);for(var g=r(f,[m,E],void 0,!0),h=0,i=g.length;h<i;h++){var n=W++;g[h].setAttribute(H,n)}g=r(f,j,void 0,!0);h=0;for(i=g.length;h<i;h++)n=g[h],/class\s*:/.test(k(n,j))&&""!=n.className&&n.setAttribute(I,n.className)}c.push(f.cloneNode(!0))}this._srces=
c;this._loopElementsMap={};this._rootContext=b;this._usingContexts=[];this._srcToViewMap={};this._listeners={};x(this,this._targets,this._rootContext,!1,!0)}var j="data-h5-bind",m="data-h5-context",E="data-h5-loop-context",H="data-h5-dyn-ctx",R="data-h5-dyn-vid",G="data-h5-dyn-bind-root",I="data-h5-dyn-cn",O=":",ea=";",wa=/\(\s*(\S+)\s*\)/,N=7100,V=7101,$=7102,W=0,J=0,S=0,Q={},fa={},da;(function(){var b=document.createElement("div");b.h5Dummy="a";var c=b.cloneNode(!1),d=void 0!==c.h5Dummy;b.h5Dummy=
void 0;d?(c.h5Dummy=void 0,da=function(b){var c=b.ownerDocument;return b.nodeType===X?a(a.trim(b.outerHTML),c)[0]:b.cloneNode(!0)}):da=function(a){return a.cloneNode(!0)}})();a.extend(b.prototype,{unbind:function(){for(var a=0,b=this._targets.length;a<b;a++){var c=this._targets[a];if(c.nodeType===X){this._removeBinding(c);c.removeAttribute(G);for(var d=r(c,I,void 0,!0),e=0,f=d.length;e<f;e++)d[e].removeAttribute(I);c=r(c,H,void 0,!0);e=0;for(d=c.length;e<d;e++)c[e].removeAttribute(H)}}delete Q[this._bindRootId]},
_observableArray_changeListener:function(a){var b=this._getViewsFromSrc(a.target);if(b)for(var c in b)if(b.hasOwnProperty(c)){var e=b[c],f=this._getSrcCtxNode(k(e,H)),g=this._loopElementsMap[c];switch(a.method){case "set":d(this,e,a.target,[a.args[0],1,a.args[1]],g,f);break;case "shift":case "pop":var j=g[a.method]();j&&t(this,e,j);break;case "unshift":j=h(this,g,f,a.method,a.args);e.insertBefore(j,e.firstChild);break;case "push":j=h(this,g,f,a.method,a.args);e.appendChild(j);break;case "splice":d(this,
e,a.target,a.args,g,f);break;case "reverse":for(var j=e,i=g;j.firstChild;)j.removeChild(j.firstChild);for(var m=0,e=i.length;m<e;m++)for(var f=i[m],n=f.length-1;0<=n;n--)j.insertBefore(f[n],j.firstChild);g.reverse();break;case "sort":case "copyFrom":case null:for(var j=this._loopElementsMap,i=c,m=a.target,n=g,g=f,f=0,p=n.length;f<p;f++)t(this,e,n[f]);for(var n=e.ownerDocument.createDocumentFragment(),p=[],f=0,o=m.length;f<o;f++){var s=A(g);p[f]=s;for(var L=0,ma=s.length;L<ma;L++)n.appendChild(s[L]);
x(this,s,m.get(f))}e.appendChild(n);j[i]=p}}},_observableItem_changeListener:function(a){var b=this._getViewsFromSrc(a.target);if(b){var c=!1;a.target===this._rootContext&&(c=!0);var d=this,e;for(e in b)if(b.hasOwnProperty(e)){var g=b[e];v(g,c).each(function(){p(this,a.target,!0)});f(g,m).each(function(){var b=k(this,m);if(!(b in a.props))return!0;d._removeBinding(this);var c=k(this,H),c=d._getSrcCtxNode(c),c=da(c);this.parentNode.replaceChild(c,this);x(d,c,a.props[b].newValue)});f(g,E).each(function(){var b=
k(this,E);if(!(b in a.props)||a.target._isArrayProp(b))return!0;d._removeBinding(this);x(d,this,a.props[b].newValue,!0)})}}},_getSrcCtxNode:function(a){for(var b=0,c=this._srces.length;b<c;b++){var d=this._srces[b];if(k(d,H)===a)return d;d=r(d,H,a);if(0<d.length)return d[0]}return null},_isWatching:function(a){a=this._getContextIndex(a);return-1===a?!1:null!=this._listeners[a]},_getContextIndex:function(b){return a.inArray(b,this._usingContexts)},_addBindingEntry:function(a,b,c){var d=this._getContextIndex(a);
-1===d&&(this._usingContexts.push(a),d=this._usingContexts.length-1);fa[c]=a;(a=this._srcToViewMap[d])?a[c]=b:(a={},a[c]=b,this._srcToViewMap[d]=a)},_hasBindingForSrc:function(a){for(var b in a)if(a.hasOwnProperty(b))return!0;return!1},_removeBindingEntry:function(a){var b=fa[a];if(b){var d=this._getContextIndex(b);if(-1!==d){var e=this._srcToViewMap[d];e&&e[a]&&(delete e[a],this._hasBindingForSrc(e)||(e=!1,i(b)?(b.removeEventListener("change",this._listeners[d]),e=!0):c.core.data.isObservableArray(b)&&
(b.removeEventListener("change",this._listeners[d]),e=!0),e&&delete this._listeners[d],delete this._srcToViewMap[d],this._usingContexts[d]=null))}fa[a]&&delete fa[a]}},_removeBinding:function(a){if(a.nodeType===X){var b=k(a,R);null!=b&&(this._removeBindingEntry(b),a.removeAttribute(R));for(var a=r(a,R),b=0,c=a.length;b<c;b++){var d=a[b];this._removeBindingEntry(k(d,R));d.removeAttribute(R)}}},_getViewsFromSrc:function(a){a=this._getContextIndex(a);return-1===a?null:this._srcToViewMap[a]}});sa={createBinding:function(a,
c){return new b(a,c)}}})();(function(){function e(b){var c={},d;for(d in fa){var f=a("<div></div>").addClass(b).addClass(d).appendTo("body"),g=a.camelCase(d);c[g]={};a.map(fa[d],function(a){c[g][a]="width"===a||"height"===a?parseInt(f.css(a).replace(/\D/g,""),10):f.css(a)});f.remove()}return c}function y(a,b,c){var a=b.createElement("v:"+a),d;for(d in c)a.style[d]=c[d];return a}function r(a,b){for(var c=[],d=a/2,e=0.8*a/2,f=360/b*Math.PI/180,g=1;g<=b;g++){var j=f*g,h=Math.cos(j),j=Math.sin(j);c.push({from:{x:d+
e/2*h,y:d+e/2*j},to:{x:d+e*h,y:d+e*j}})}return c}function o(a){return function(){var b=document.body,c=document.documentElement,d=M?b:ca?c:null;return d?"Height"===a?d["client"+a]>d["scroll"+a]?d["client"+a]:d["scroll"+a]:d["client"+a]:Math.max(b["scroll"+a],c["scroll"+a],b["offset"+a],c["offset"+a],c["client"+a])}}function C(a){return function(){var b=M?document.body:document.documentElement;return window["page"+("Top"===a?"Y":"X")+"Offset"]||b["scroll"+a]}}function f(a){var b=M?document.body:document.documentElement;
return J.isiOS?window["inner"+a]:b["client"+a]}function i(b){var c=a(b)[0],d=document.body,e=a("html")[0],b={top:0,left:0};if(c===d&&ca)return{top:parseFloat(e.currentStyle.paddingTop||0)+parseFloat(d.currentStyle.marginTop||0)+parseFloat(d.currentStyle.borderTop||0),left:parseFloat(e.currentStyle.paddingLeft||0)+parseFloat(d.currentStyle.marginLeft||0)+parseFloat(d.currentStyle.borderLeft||0)};"undefined"!==typeof c.getBoundingClientRect&&(b=c.getBoundingClientRect());d=M?d:document.documentElement;
c=d.clientTop||0;d=d.clientLeft||0;return{top:b.top+ja()-c,left:b.left+ha()-d}}function n(){a.each(ba(arguments),function(a,b){b.bind("click dblclick touchstart touchmove touchend mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave focus focusin focusout blur change select",function(){return!1})})}function B(a){a=S(a)?a[0]:a;return a===window||a===document||a===document.body}function x(a){return Q(N(a)).getComputedStyle(a,null)}function g(b,c){return!Q(N(b)).getComputedStyle?a(b).css(c):
x(b)[c]}function p(b){if(!Q(N(b)).getComputedStyle)return a(b).height();var c=x(b);return b.offsetHeight-parseFloat(c.paddingTop)-parseFloat(c.paddingBottom)}function t(b){if(!Q(N(b)).getComputedStyle)return a(b).width();var c=x(b);return b.offsetWidth-parseFloat(c.paddingLeft)-parseFloat(c.paddingRight)}function A(b,c){if(!Q(N(b)).getComputedStyle)return a(b).outerHeight();var d=x(b);return p(b)+parseFloat(d.paddingTop)+parseFloat(d.paddingBottom)+parseFloat(d.borderTopWidth)+parseFloat(d.borderBottomWidth)+
(c?parseFloat(d.marginTop)+parseFloat(d.marginBottom):0)}function h(b,c){if(!Q(N(b)).getComputedStyle)return a(b).outerWidth();var d=x(b);return t(b)+parseFloat(d.paddingLeft)+parseFloat(d.paddingRight)+parseFloat(d.borderLeftWidth)+parseFloat(d.borderRightWidth)+(c?parseFloat(d.marginLeft)+parseFloat(d.marginRight):0)}function d(b){if(!Q(N(b)).getComputedStyle)return a(b).innerHeight();var c=x(b);return p(b)+parseFloat(c.paddingTop)+parseFloat(c.paddingBottom)}function b(b){if(!Q(N(b)).getComputedStyle)return a(b).innerWidth();
var c=x(b);return t(b)+parseFloat(c.paddingLeft)+parseFloat(c.paddingRight)}function j(b,c,d,e){function f(){j+=g;j>d?(clearInterval(m),c.each(function(a){for(var c in b[a])this.style[c]=""}),e()):c.each(function(b){var c=h[b],d;for(d in c)c[d]+=i[b][d];a(this).css(c)})}var g=W,j=0,h=[],i=[];c.each(function(a){var e=b[a];i[a]={};h[a]={};var f=x(c[a]),j;for(j in e)h[a][j]=parseFloat(f[j]),i[a][j]=(parseFloat(e[j])-parseFloat(f[j]))*g/d});f();var m=setInterval(f,g)}function m(a,b,c){var d=[];a.each(function(){var a=
parseFloat(g(this,"opacity"));d.push({opacity:a})});a.css({opacity:0,display:"block"});j(d,a,b,c)}function E(a,b,c){var d=[];a.each(function(){d.push({opacity:0})});j(d,a,b,c)}function H(b,c){this.style=a.extend(!0,{},b);if(!c.getElementById(P)){c.namespaces.add("v","urn:schemas-microsoft-com:vml");var d=c.createElement("style");c.getElementsByTagName("head")[0].appendChild(d);d.id=P;d.setAttribute("type","text/css");d.styleSheet.cssText="v\\:stroke,v\\:line,v\\:textbox { behavior:url(#default#VML); }"}d=
this.style.throbber.width;this.group=y("group",c,{width:d+"px",height:this.style.throbber.height+"px"});this.group.className=wa;for(var d=r(d,this.style.throbber.lines),e=this.style.throbberLine.color,f=this.style.throbberLine.width,g=0,j=d.length;g<j;g++){var h=d[g],i=h.from,m=h.to,h=y("line",c);h.strokeweight=f;h.strokecolor=e;h.fillcolor=e;h.from=i.x+","+i.y;h.to=m.x+","+m.y;i=y("stroke",c);i.opacity=1;h.appendChild(i);this.group.appendChild(h)}this._createPercentArea(c)}function R(b,d){var f=
this,g=a(b);if(g.length){var j=B(g),g=j?a("body"):g,h=N(g[0]);if(h!==window.document&&(g[0]===h||Q(h)===g[0]))g=a(h.body);var i=a.extend(!0,{},{message:"",percent:-1,block:!0,fadeIn:-1,fadeOut:-1,promises:null,theme:"a",showThrobber:!0},d);this._displayed=!1;this._throbbers=[];this._settings=i;this._styles=a.extend(!0,{},{throbber:{roundTime:1E3,lines:12},throbberLine:{},percent:{}},e(i.theme));i.throbber&&a.extend(this._styles.throbber,i.throbber);this._isScreenLock=j;this._$target=g;this._target=
1===this._$target.length?this._$target[0]:this._$target.toArray();this._scrollEventTimerId=null;this._scrollHandler=function(){f._handleScrollEvent()};this._resizeEventTimerId=null;this._resizeHandler=function(){f._handleResizeEvent()};this._redrawable=!0;this._lastPercent=-1;this._lastMessage=null;this._fadeInTime="number"===typeof i.fadeIn?i.fadeIn:-1;this._fadeOutTime="number"===typeof i.fadeOut?i.fadeOut:-1;this._$content=a();this._$overlay=a();this._$skin=a();this._showContent=i.showThrobber||
i.message;for(var g=c.u.str.format(V,""===i.message?'style="display: none;"':"",i.message),j="https"===document.location.protocol?"return:false":"about:blank",m=0,n=this._$target.length;m<n;m++)this._$content=this._$content.add(a(h.createElement("div")).append(g).addClass(G).addClass(i.theme).addClass(ta).css("display","none")),this._$overlay=this._$overlay.add((i.block?a(h.createElement("div")):a()).addClass(G).addClass(i.theme).addClass(O).css("display","none")),this._$skin=this._$skin.add((ca||
M?a(h.createElement("iframe")):a()).attr("src",j).addClass(G).addClass(ea).css("display","none"));var p=this._isScreenLock&&D?"fixed":"absolute";a.each([this._$overlay,this._$content],function(){this.css("position",p)});h=i.promises;i=function(){f.hide()};g=a.hasOwnProperty("curCSS")?"pipe":"then";F(h)?(h=a.map(h,function(a){return a&&I(a.promise)?a:null}),0<h.length&&qa(c.async.when(h),g,[i,i])):h&&I(h.promise)&&qa(h,g,[i,i])}}var G="h5-indicator",ta="content",O="overlay",ea="skin",wa="vml-root",
P="h5-vmlstyle",V='<span class="indicator-throbber"></span><span class="indicator-message" {0}>{1}</span>',$=500,W=13,J=c.env.ua,S=c.u.obj.isJQueryObject,ba=c.u.obj.argsToArray,fa={throbber:["width","height"],"throbber-line":["width","color"]},da=!!document.createElement("canvas").getContext,w=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div"));a.innerHTML='<v:line strokeweight="1"/>';a=a.firstChild;a.style.behavior="url(#default#VML)";return"number"===typeof a.strokeweight}(),
M="CSS1Compat"!==document.compatMode,ca=J.isIE&&6>=J.browserVersion,D=!(J.isAndroidDefaultBrowser||J.isiOS&&5>J.browserVersion||ca||M||J.isWindowsPhone),ga=null,X=null,Z=null,ia=null,ja=null,ha=null,oa=function(){var b=document.createDocumentFragment().appendChild(document.createElement("div")),c=["Webkit","Moz","O","ms","Khtml"],d=c.length;return function(e){e=a.camelCase(e);if(e in b.style)return!0;for(var e=e.charAt(0).toUpperCase()+e.slice(1),f=0;f<d;f++)if(c[f]+e in b.style)return!0;return!1}}(),
X=function(a){return function(){var b=document.body,c=document.documentElement;return"number"===typeof window["inner"+a]?window["inner"+a]:M?b["client"+a]:c["client"+a]}}("Height"),Z=o("Height"),ia=o("Width"),ja=C("Top"),ha=C("Left"),ga=oa("animationName");H.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.group),this._run())},hide:function(){this.root.innerHTML="";this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){var a=
this.style.throbber.lines;if(0!==a){for(var b=this.style.throbber.roundTime,c=this.highlightPos,d=this.group.childNodes,e=0,f=d.length;e<f;e++){var g=d[e];if("textbox"!==g.nodeName){var j=e+1;g.firstChild.opacity=j==c?"1":j==c+1||j==c-1?"0.75":"0.4"}}c==a?c=0:c++;this.highlightPos=c;var h=this;this._runId=setTimeout(function(){h._run.call(h)},Math.floor(b/a))}},_createPercentArea:function(b){var c=y("textbox",b),b=a(b.createElement("table"));b.append("<tr><td></td></tr>");var d=b.find("td");d.width(this.group.style.width);
d.height(this.group.style.height);d.css("line-height",this.group.style.height);d.addClass("throbber-percent");c.appendChild(b[0]);this.group.appendChild(c)},setPercent:function(b){a(this.group).find(".throbber-percent").html(b)}};var na=function(b,c){this.style=a.extend(!0,{},b);this.canvas=c.createElement("canvas");this.baseDiv=c.createElement("div");this.percentDiv=c.createElement("div");var d=this.canvas,e=this.baseDiv,f=this.percentDiv;d.width=this.style.throbber.width;d.height=this.style.throbber.height;
d.style.display="block";d.style.position="absolute";e.style.width=this.style.throbber.width+"px";e.style.height=this.style.throbber.height+"px";e.appendChild(d);f.style.width=this.style.throbber.width+"px";f.style.height=this.style.throbber.height+"px";f.style.lineHeight=this.style.throbber.height+"px";f.className="throbber-percent";e.appendChild(f);this.positions=r(d.width,this.style.throbber.lines)};na.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.baseDiv),
this._run())},hide:function(){a(this.baseDiv).remove();this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.style.throbber.lines;if(0!==a){var b=this.canvas,c=b.getContext("2d"),d=this.highlightPos,e=this.positions,f=this.style.throbberLine.color,g=this.style.throbberLine.width,j=this.style.throbber.roundTime;b.width=b.width;for(var h=0,i=e.length;h<i;h++){c.beginPath();c.strokeStyle=f;c.lineWidth=g;var m=h+1;c.globalAlpha=m==d?1:m==d+1||m==d-1?0.75:0.4;var k=e[h],
m=k.from,k=k.to;c.moveTo(m.x,m.y);c.lineTo(k.x,k.y);c.stroke()}d==a?d=0:d++;this.highlightPos=d;if(ga)b.className="throbber-canvas";else{var n=this;this._runId=setTimeout(function(){n._run.call(n)},Math.floor(j/a))}}},setPercent:function(a){this.percentDiv.innerHTML=a}};R.prototype={show:function(){if(this._displayed||!this._$target||0<this._$target.children("."+G).length)return this;this._displayed=!0;for(var b=this,c=this._fadeInTime,d=function(){var c=a(window);b._isScreenLock&&(n(b._$overlay,
b._$content),D||(c.bind("touchmove",b._scrollHandler),c.bind("scroll",b._scrollHandler)));c.bind("orientationchange",b._resizeHandler);c.bind("resize",b._resizeHandler)},e=0,f=this._$target.length;e<f;e++){var j=this._$target.eq(e),h=this._$content.eq(e),i=this._$skin.eq(e),k=this._$overlay.eq(e),p=this._settings,o=g(j[0],"position");!this._isScreenLock&&"static"===o&&(j.data("before-position",o),j.data("before-zoom",g(j[0],"zoom")),j.css({position:"relative",zoom:"1"}));var o=N(j[0]),r=null;p.showThrobber&&
(r=da?new na(this._styles,o):w?new H(this._styles,o):null);r&&(b._throbbers.push(r),b.percent(this._settings.percent),r.show(h.children(".indicator-throbber")[0]));j.append(i).append(k);this._showContent&&j.append(h)}e=this._$skin.toArray();Array.prototype.push.apply(e,this._$content.toArray());Array.prototype.push.apply(e,this._$overlay.toArray());e=a(e);0>c?(e.css("display","block"),d()):m(e,c,d);this._reposition();this._resizeOverlay();return this},_resizeOverlay:function(){var a,b;if(!(this._isScreenLock&&
D||0===this._$overlay.length))for(var c=0,d=this._$target.length;c<d;c++){var e=this._$content.eq(c),f=this._$overlay.eq(c);b=this._$target.eq(c);var g=this._$skin.eq(c);if(this._isScreenLock)e=ia(),b=Z();else{f.css("display","none");e.css("display","none");var j=b[0];a=j.scrollWidth;b=j.scrollHeight;if(ca)a=Math.max(a,j.clientWidth),b=Math.max(b,j.clientHeight);else if(J.isIE&&"function"===typeof getComputedStyle){var j=Q(N(j)).getComputedStyle(j,null),h=parseFloat(j.width)+parseFloat(j.paddingLeft)+
parseFloat(j.paddingRight);a+=h-parseInt(h)-1;j=parseFloat(j.height)+parseFloat(j.paddingTop)+parseFloat(j.paddingBottom);b+=j-parseInt(j)-1}f.css("display","block");e.css("display","block");e=a}f[0].style.width=e+"px";f[0].style.height=b+"px";if(ca||M)g[0].style.width=e+"px",g[0].style.height=b+"px"}},_reposition:function(){for(var c=0,e=this._$target.length;c<e;c++){var f=this._$target.eq(c),j=this._$content.eq(c);if(this._isScreenLock){var i=X();D?j.css("top",(i-A(j[0]))/2+"px"):j.css("top",ja()+
i/2-A(j[0])/2+"px")}else j.css("top",f.scrollTop()+(d(f[0])-A(j[0]))/2);var i=b(j[0])-t(j[0]),m=0;j.children().each(function(){var b=a(this);if("none"===g(b[0],"display"))return!0;m+=h(this,!0)});j.css("width",m+i);j.css("left",f.scrollLeft()+(b(f[0])-h(j[0]))/2)}},hide:function(){if(!this._displayed)return this;this._displayed=!1;var b=this,c=this._fadeOutTime,d=this._$skin.toArray();Array.prototype.push.apply(d,this._$content.toArray());Array.prototype.push.apply(d,this._$overlay.toArray());for(var e=
a(d),d=function(){var c=a(window);e.remove();b._isScreenLock||b._$target.each(function(b,c){var d=a(c);d.css({position:d.data("before-position"),zoom:d.data("before-zoom")});d.removeData("before-position").removeData("before-zoom")});c.unbind("touchmove",b._scrollHandler);c.unbind("scroll",b._scrollHandler);c.unbind("orientationchange",b._resizeHandler);c.unbind("resize",b._resizeHandler);b._resizeEventTimerId&&clearTimeout(b._resizeEventTimerId);b._scrollEventTimerId&&clearTimeout(b._scrollEventTimerId)},
f=0,g=this._throbbers.length;f<g;f++)this._throbbers[f].hide();0>c?(e.css("display","none"),d()):E(e,c,d);return this},percent:function(a){if("number"!==typeof a||!(0<=a&&100>=a))return this;if(!this._redrawable)return this._lastPercent=a,this;for(var b=0,c=this._throbbers.length;b<c;b++)this._throbbers[b].setPercent(a);return this},message:function(a){if(!v(a))return this;if(!this._redrawable)return this._lastMessage=a,this;(this._showContent=this._settings.showThrobber||!!a)?this._$target.append(this._$content):
this._$content.remove();this._$content.children(".indicator-message").css("display","inline-block").text(a);this._reposition();return this},_handleScrollEvent:function(){this._scrollEventTimerId&&clearTimeout(this._scrollEventTimerId);if(this._redrawable){var a=this;this._scrollEventTimerId=setTimeout(function(){a._reposition();a._scrollEventTimerId=null},50)}},_handleResizeEvent:function(){function a(){b._resizeOverlay();b._reposition();b._redrawable=!0;b.percent(b._lastPercent);b.message(b._lastMessage);
b._resizeEventTimerId=null}var b=this;this._resizeEventTimerId&&clearTimeout(this._resizeEventTimerId);this._redrawable=!1;D||ca||M?a():this._resizeEventTimerId=setTimeout(function(){a()},1E3)}};c.u.obj.expose("h5.ui",{indicator:function(b,c){return a.isPlainObject(b)?new R(b.target,b):new R(b,c)},isInView:function(b,c){var d,e,g,j,h=a(b);if(typeof c===la)e=f("Height"),j=f("Width"),d=ja(),g=ha();else{j=a(c);if(0===j.find(h).length)return;g=i(j);d=g.top+parseInt(j.css("border-top-width"));g=g.left+
parseInt(j.css("border-left-width"));e=j.innerHeight();j=j.innerWidth()}e=d+e;j=g+j;var m=i(h),k=m.top,m=m.left,n=k+h.outerHeight(),h=m+h.outerWidth();return(d<=k&&k<e||d<n&&n<=e)&&(g<=m&&m<j||g<h&&h<=j)},scrollToTop:function(){function b(){1===window.scrollY&&(c=0);0<c&&(window.scrollTo(0,1),c--,setTimeout(b,$))}var c=3;window.scrollTo(0,1);1!==a(window).scrollTop()&&setTimeout(b,$)}})})();(function(){function k(){var c=a.mobile.activePage,c=c&&c[0]&&c[0].id;return v(c)&&0<c.length?c:null}function y(){var c=
k();null!==c&&a(function(){f.addCSS(c);f.bindController(c)})}function r(a,b){for(var c in n)for(var e=n[c],f=a===c,g=0,h=e.length;g<h;g++){var i=e[g];if(f)i[(b?"enable":"disable")+"Listeners"]()}for(c in B){e=B[c];f=a===c;g=0;for(h=e.length;g<h;g++)if(i=e[g],f)i[(b?"enable":"disable")+"Listeners"]()}}function o(a,b){a=a.replace(/(\.0+)+$/,"");b=b.replace(/(\.0+)+$/,"");if(a===b)return 0;for(var c=a.split("."),e=b.split("."),f=c.length,g=0;g<f;g++){if(null==e[g])return 1;var h=parseInt(c[g],10),i=
parseInt(e[g],10);if(h!==i)return h<i?-1:1}return null!=e[f]?-1:0}var C,f=null,i={},n={},B={},x={},g={},p=!1,t=!1,A=!1;c.u.obj.ns("h5.ui.jqm");c.ui.jqm.dataPrefix="h5";var h={__name:"JQMController",__ready:function(){var c=this,b=k();a(':jqmData(role="page"), :jqmData(role="dialog")').each(function(){c.loadScript(this.id)});var e=this.$find("#"+b);e.one("h5controllerready.emulatepageshow",function(){A&&e[0]===a.mobile.activePage[0]&&e.trigger("h5jqmpageshow",{prevPage:a("")})})},':jqmData(role="page"), :jqmData(role="dialog") pageinit':function(a){C||
this._initPage(a.event.target.id)},':jqmData(role="page"), :jqmData(role="dialog") pagecreate':function(a){C&&this._initPage(a.event.target.id)},_initPage:function(a){this.loadScript(a);this.addCSS(a);this.bindController(a)},"{rootElement} pageremove":function(c){a(c.event.target).trigger("h5jqmpagehide",{nextPage:a.mobile.activePage});t=!0;var c=c.event.target.id,b=n[c],e=B[c];if(b){for(var f=0,g=b.length;f<g;f++)b[f].dispose();n[c]=[]}if(e){f=0;for(g=e.length;f<g;f++)e[f].dispose();B[c]=[]}},"{rootElement} pagebeforeshow":function(a){a=
a.event.target.id;this.addCSS(a);r(a,!0)},"{rootElement} pagehide":function(c){t||a(c.event.target).trigger("h5jqmpagehide",{nextPage:c.evArg.nextPage});t=!1;c=c.event.target.id;r(c,!1);this.removeCSS(c)},"{rootElement} pageshow":function(c){var b=!1,e=a(c.event.target),f=c.evArg?c.evArg.prevPage:a("");if(c=n[e[0].id])for(var g=0,h=c.length;g<h;g++)if(!c[g].isReady){e.unbind("h5controllerready.emulatepageshow").one("h5controllerready.emulatepageshow",function(){a.mobile.activePage[0]===e[0]&&e.trigger("h5jqmpageshow",
{prevPage:f})});b=!0;break}b||e.trigger("h5jqmpageshow",{prevPage:f})},"{rootElement} h5controllerbound":function(c){c=c.evArg;if(this!==c){var b=k();null!==b&&-1===a.inArray(c,n[b])&&(B[b]||(B[b]=[]),B[b].push(c))}},"{rootElement} h5controllerunbound":function(c){var b=c.evArg,c=k();null!==c&&(b=a.inArray(b,B[c]),-1!==b&&B[c].splice(b,1))},loadScript:function(d){var d=a("#"+d),b=a.trim(d.data(this.getDataAttribute("script")));if(0!==b.length)return b=a.map(b.split(","),function(b){return a.trim(b)}),
d=!0==d.data(this.getDataAttribute("async")),c.u.loadScript(b,{async:d})},getDataAttribute:function(a){var b=c.ui.jqm.dataPrefix;null==b&&(b="h5");return 0!==b.length?b+"-"+a:a},bindController:function(a){var b=i[a],e=x[a];if(b&&0!==b.length){n[a]||(n[a]=[]);for(var f=n[a],g=0,h=b.length;g<h;g++){for(var k=b[g],p=!1,o=0,r=f.length;o<r;o++){var t=f[o];if(t&&t.__name===k.__name){p=!0;break}}p||n[a].push(c.core.controller("#"+a,k,e[g]))}}},addCSS:function(c){if(c=g[c])for(var b=document.getElementsByTagName("head")[0],
e=b.getElementsByTagName("link"),f=e.length,h=0,i=c.length;h<i;h++){for(var k=a.mobile.path.parseUrl(c[h]).filename,n=!1,p=0;p<f;p++)if(a.mobile.path.parseUrl(e[p].href).filename===k){n=!0;break}n||(k=document.createElement("link"),k.type="text/css",k.rel="stylesheet",k.href=c[h],b.appendChild(k))}},removeCSS:function(c){var b=g[c];if(b&&(c=k(),null!==c)){var e=g[c];a("link").filter(function(){var c=a(this).attr("href");return-1!==a.inArray(c,b)&&-1===a.inArray(c,e)}).remove()}}};c.u.obj.expose("h5.ui.jqm.manager",
{init:function(){p||(p=!0,C=0<=o(a.mobile.version,"1.4"),a(document).one("pageshow",function(){A=!0}),a(function(){f=ha.controllerInternal("body",h,null,{managed:!1});y()}))},define:function(c,b,f,h){v(c)||e(12E3,"id");null!=b&&!v(b)&&!F(b)&&e(12E3,"cssSrc");null!=f&&((v(f)||F(f))&&e(12001),(!a.isPlainObject(f)||!("__name"in f))&&e(12E3,"controllerDefObject"),null!=h&&!a.isPlainObject(h)&&e(12E3,"initParam"));g[c]||(g[c]=[]);i[c]||(i[c]=[]);x[c]||(x[c]=[]);a.merge(g[c],a.map(a.makeArray(b),function(b){return a.inArray(b,
g[c])!==-1?null:b}));f&&-1===a.inArray(f,i[c])&&(i[c].push(f),x[c].push(h));p&&null!==k()?y():this.init()}})})();(function(){function k(){o||(o=navigator.geolocation);return o}function y(a,c){this.oblateness=a;this.semiMajorAxis=c}function r(){}var o=null,v=c.env.ua;y.prototype.getOblateness=function(){return this.oblateness};y.prototype.getSemiMajorAxis=function(){return this.semiMajorAxis};var f=new y(298.257222,6378137),i=new y(299.152813,6377397.155),n=Math.PI/180;a.extend(r.prototype,{isSupported:v.isIE&&
9<=v.browserVersion?!0:!!k(),getCurrentPosition:function(a){var e=c.async.deferred();k().getCurrentPosition(function(a){e.resolve(a)},function(a){e.reject(S(2002,null,a))},a);return e.promise()},watchPosition:function(a){function e(){}var f=c.async.deferred(),i=k().watchPosition(function(a){f.notify(a)},function(a){k().clearWatch(i);f.reject(S(2002,null,a))},a);e.prototype.unwatch=function(){k().clearWatch(i);f.resolve()};return f.promise(new e)},getDistance:function(a,c,g,i,k){(!isFinite(a)||!isFinite(c)||
!isFinite(g)||!isFinite(i))&&e(2E3);var o=k?k:f;o instanceof y||e(2001);var k=o.getSemiMajorAxis(),h=o.getOblateness(),a=a*n,c=c*n,g=g*n,o=i*n,i=(a+g)/2,h=Math.sqrt(2*h-1)/h,h=Math.pow(h,2),d=Math.sqrt(1-h*Math.pow(Math.sin(i),2)),h=k*(1-h)/Math.pow(d,3),k=k/d,c=c-o;return Math.sqrt(Math.pow(h*(a-g),2)+Math.pow(k*Math.cos(i)*c,2))},GS_GRS80:f,GS_BESSEL:i});c.u.obj.expose("h5.api",{geo:new r})})();(function(){function k(a){if(a){var c=a.deferred;(La(c)||va(c)||!a.result)&&e(p)}}function y(b,c,d){if(a.isPlainObject(b))for(var f in b){var g=
a.trim(f).replace(/ +/g," ").split(" "),h=[];""===g[0]?e(A):1===g.length?(h.push(g[0]),h.push("="),h.push("?")):/^(<=|<|>=|>|=|!=|like)$/i.test(g[1])?3===g.length&&/^like$/i.test(g[1])?(h.push(g[0]),h.push(g[1]),h.push("?"),h.push("ESCAPE"),h.push('"'+g[2]+'"')):(h.push(g[0]),h.push(g[1]),h.push("?")):e(t);c.push(h.join(" "));d.push(b[f])}}function r(){}function o(){this._multiple=!1}function C(a){this._db=a;this._df=h();this._tx=null;this._tasks=[];this._queue=[]}function f(a,c,d){this._statements=
[];this._parameters=[];this._executor=a;this._tableName=c;this._columns=F(d)?d.join(", "):"*";this._orderBy=this._where=null}function i(a,c,d){this._statements=[];this._parameters=[];this._executor=a;this._tableName=c;this._values=d?P(d):[];this._df=h();this._multiple=!0}function n(a,c,d){this._statements=[];this._parameters=[];this._executor=a;this._tableName=c;this._values=d;this._where=null}function B(a,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=c;this._where=null}
function x(a,c,d){this._statements=[];this._parameters=[];this._executor=a;this._statements.push(c);this._parameters.push(d||[])}function g(a){this._db=a}var p=3E3,t=3003,A=3011,h=c.async.deferred,d=c.u.str.format;a.extend(o.prototype,{execute:function(){return this._executor.add(this)._execute(function(a){return a[0]})}});a.extend(C.prototype,{_runTransaction:function(){return null!=this._tx},_addTask:function(a){this._tasks.push({deferred:a,result:null})},_setResult:function(a){this._getRecentTask().result=
a},_getRecentTask:function(){return this._tasks[this._tasks.length-1]},add:function(a){a instanceof o||e(3009);var c=this._getRecentTask();(!c||c.result)&&this._queue.push(a);return this},_execute:function(a){function c(){if(0===f.length){var i=a(g);d._setResult.apply(d,[i]);e.notify(i,d)}else{for(var k=f.shift(),n=k._statements,o=k._parameters,p=h().resolve().promise(),i=[],r=0,t=n.length;r<t;r++)(function(a,b){p=Z(p,function(){var c=h();d._tx.executeSql(a,b,function(a,b){i.push(k._onComplete(b));
c.resolve()});return c.promise()})})(n[r],o[r]);Z(p,function(){g.push(k._multiple?i:i[0]);c()})}}var d=this,e=this._df,f=this._queue,g=[];try{k(this._getRecentTask());this._addTask(e);for(var i=0,n=f.length;i<n;i++)f[i]._buildStatementAndParameters();this._runTransaction()?c():this._db.transaction(function(a){d._tx=a;c()},function(a){d._tx=null;for(var b=d._tasks,c=b.length-1;0<=c;c--)b[c].deferred.reject(S(3010,["SQLDB ERROR(code="+a.code+")",a.message],a))},function(){d._tx=null;for(var a=d._tasks,
b=a.length-1;0<=b;b--){var c=a[b];c.deferred.resolve(c.result)}})}catch(o){e.reject(o)}this._df=h();return e.promise()},execute:function(){return this._execute(function(a){return a})},promise:function(){return this._df.promise()}});f.prototype=new o;a.extend(f.prototype,{where:function(b){!a.isPlainObject(b)&&!v(b)&&e(3004,["Select","where"]);this._where=b;return this},orderBy:function(b){!a.isPlainObject(b)&&!v(b)&&e(3004,["Select","orderBy"]);this._orderBy=P(b);return this},_buildStatementAndParameters:function(){var b=
"",c=this._where,b=d("SELECT {0} FROM {1}",this._columns,this._tableName);if(a.isPlainObject(c)){var e=[];y(c,e,this._parameters);b+=" WHERE "+e.join(" AND ")}else v(c)&&(b+=" WHERE "+c);F(this._orderBy)&&(b+=" ORDER BY "+this._orderBy.join(", "));this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rows}});i.prototype=new o;a.extend(i.prototype,{_buildStatementAndParameters:function(){var b=this._values,c=this._statements,e=this._parameters;if(0===b.length)c.push(d("INSERT INTO {0} DEFAULT VALUES",
this._tableName)),e.push([]);else for(var f=0,g=b.length;f<g;f++){var h=b[f];if(null==h)c.push(d("INSERT INTO {0} DEFAULT VALUES",this._tableName)),e.push([]);else if(a.isPlainObject(h)){var i=[],k=[],n=[],o;for(o in h)i.push("?"),k.push(o),n.push(h[o]);c.push(d("INSERT INTO {0} ({1}) VALUES ({2})",this._tableName,k.join(", "),i.join(", ")));e.push(n)}}},_onComplete:function(a){return a.insertId}});n.prototype=new o;a.extend(n.prototype,{where:function(b){!a.isPlainObject(b)&&!v(b)&&e(3004,["Update",
"where"]);this._where=b;return this},_buildStatementAndParameters:function(){var b="",c=this._where,b=this._values,e=[],f;for(f in b)e.push(f+" = ?"),this._parameters.push(b[f]);b=d("UPDATE {0} SET {1}",this._tableName,e.join(", "));a.isPlainObject(c)?(f=[],y(c,f,this._parameters),b+=" WHERE "+f.join(" AND ")):v(c)&&(b+=" WHERE "+c);this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});B.prototype=new o;a.extend(B.prototype,{where:function(b){!a.isPlainObject(b)&&
!v(b)&&e(3004,["Del","where"]);this._where=b;return this},_buildStatementAndParameters:function(){var b="",c=this._where,b=d("DELETE FROM {0}",this._tableName);if(a.isPlainObject(c)){var e=[];y(c,e,this._parameters);b+=" WHERE "+e.join(" AND ")}else v(c)&&(b+=" WHERE "+c);this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});x.prototype=new o;a.extend(x.prototype,{_buildStatementAndParameters:function(){},_onComplete:function(a){return a}});
a.extend(g.prototype,{select:function(a,c,d){v(a)||e(3001,"select");!F(c)&&"*"!==c&&e(3005,"select");return new f(this.transaction(d),a,c)},insert:function(b,c,d){v(b)||e(3001,"insert");null!=c&&!F(c)&&!a.isPlainObject(c)&&e(3006,"insert");return new i(this.transaction(d),b,c)},update:function(c,d,f){v(c)||e(3001,"update");a.isPlainObject(d)||e(3006,"update");return new n(this.transaction(f),c,d)},del:function(a,c){v(a)||e(3001,"del");return new B(this.transaction(c),a)},sql:function(a,c,d){v(a)||
e(3007,"sql");null!=c&&!F(c)&&e(3008,"sql");return new x(this.transaction(d),a,c)},transaction:function(a){void 0!=a&&!(a instanceof C)&&e(3002,"transaction");return a?a:new C(this._db)}});a.extend(r.prototype,{isSupported:!!window.openDatabase,open:function(a,c,d,e){if(this.isSupported)return a=openDatabase(a,c,d,e),new g(a)}});c.u.obj.expose("h5.api",{sqldb:new r})})();(function(){function e(a){this._storage=a}a.extend(e.prototype,{getLength:function(){return this._storage.length},key:function(a){return this._storage.key(a)},
getItem:function(a){a=this._storage.getItem(a);return null===a?null:c.u.obj.deserialize(a)},setItem:function(a,e){this._storage.setItem(a,c.u.obj.serialize(e))},removeItem:function(a){this._storage.removeItem(a)},clear:function(){this._storage.clear()},each:function(a){for(var c=this._storage,e=0,k=c.length;e<k;e++){var f=c.key(e);a(e,f,this.getItem(f))}}});c.u.obj.expose("h5.api.storage",{isSupported:window.localStorage?function(){try{return window.localStorage.setItem("__H5_WEB_STORAGE_CHECK__",
"ok"),window.localStorage.removeItem("__H5_WEB_STORAGE_CHECK__"),!0}catch(a){return!1}}():!1,local:new e(window.localStorage),session:new e(window.sessionStorage)})})();(function(){function k(a){for(var a=c.core.controllerManager.getControllers(a,{deep:!0}),b=0,d=a.length;b<d;b++)ga(a[b])||a[b].dispose()}function y(c,b){var d=a(c).filter(b),e=a(c).find(b);if(0===d.length)return e;if(0===e.length)return d;d=a.makeArray(d);e=a.makeArray(e);return a(d.concat(e))}function r(c){c=a(c).closest("["+V+"],["+
$+"]");return c.length?c.get(0):null}function o(c){c=a(c).closest("["+J+"],["+W+"]");return c.length?c.get(0):null}function C(a,c){if(a===c)return!0;var b=o(a),d=c?o(c):null;return b!==d?!1:r(a)===c}function f(b,d,f){var g=b?b:document.body,b=a(g);if(0!==b.length){1!==b.length&&e(w);if(!L&&c.settings.scene.autoCreateMainContainer){var h=y(g,"["+J+"]");0===h.length&&(h=y(g,"main"),0===h.length&&g===document.body&&(h=a(g)),0<h.length&&h.eq(0).attr(J,J))}if(b.is("["+W+"]"))G(g);else if(b.is("["+J+"]"))G(g,
!0);else{var j=a(g).is("["+V+"],["+$+"]")&&!i(g),k=j?c.async.deferred():null,m=a(g).is("["+V+"],["+$+"]")?g:r(g),o=!1;y(g,"["+Q+"]").each(function(){for(var c=this.getAttribute(Q).split(","),b=0,e=c.length;b<e;b++){var h=a.trim(c[b]);if(""===h||d&&h!==d)return!0;if(!i(this,h)){if(!C(this,m))return!0;var q=!1;j&&!o&&this===g&&(q=o=!0);n(this,h);h=x(h,this,q?f:null);q&&h.done(function(a){k.resolve(a)})}}});b.find("["+J+"],["+W+"]").each(function(){if(C(this,m))return!0;var c=a(this);c.is("["+J+"]")?
G(this,!0):c.is("["+W+"]")&&G(this)});if(j)return k.promise()}}}function i(c,b){var d=a(c).attr(X);if(!d)return!1;d=d.split(",");if(!b&&0<d.length)return!0;for(var e=0;e<d.length;e++)if(a.trim(d[e])===b)return!0;return!1}function n(c,b){var d=a(c).attr(X)||"";d&&(d+=",");a(c).attr(X,d+b)}function B(b,d,g){var h=b?b:document.body,j=c.async.deferred(),b=!1,k=null,m=a(h).find(">["+V+"]");0<m.length&&(k=m.eq(0),i(k)||(b=!0,k.is("["+Q+"]")||(n(k,ka.__name),k=c.core.controller(k,ka,g),j.resolve(k))));b||
(h=a(h).children().eq(0).filter("["+$+"]"),0<h.length&&!i(h)&&(b=!0,h.attr(V,V),m=h,h.is("["+Q+"]")||(n(h,ka.__name),k=c.core.controller(h,ka,g),j.resolve(k))));b||e(M);d=f(m.get(0),d,g);va(j)||d.done(function(a){j.resolve(a)});return j.promise()}function x(a,b,d){var e=c.async.deferred();c.res.get(a).then(function(a){a=c.core.controller(b,a,d);e.resolve(a)});return e.promise()}function g(a,c){this.type=a;this.data=c}function p(c,b){this.type=c;this._targetWindow=b;this._closed=!1;this._subscribers=
[];var d=this;this._recv=function(a){d._receiveMessage(a.originalEvent)};a(window).on("message",this._recv)}function t(a,c){var b=pa[a];b||(b=new p(a,c),pa[a]=b);return b}function A(){this._recvChannel=new p(fa,window.opener);this._recvChannel.subscribe(this._receive,this);this._sendChannel=new p(da,window.opener)}function h(a){this.targetWindow=a;this.id="FIXME";this._invocationMap={};this._invocationSeq=c.core.data.createSequence(1,1,c.core.data.SEQ_INT);this._sendChannel=t(fa,a);this._recvChannel=
t(da,a);this._recvChannel.subscribe(this._receive,this)}function d(a){this.__controller=a}function b(){}function j(a,c,b,d){this.window=a=window.open(a,c,b);this._isModal=!1;this._parentBlocker=null;this.setModal(!0===d?!0:!1);this._rmi=new h(a);this._watchChild()}function m(c){c=a(c);if(!1===c.children().eq(0).is("["+V+"],["+$+"]")){c.wrapInner(a("<div "+V+"></div>"));var b=c.attr(Q);b&&c.removeAttr(Q).children().attr(Q,b)}}function E(b,d){var f=c.async.deferred();c.ajax({url:b,dataType:"html"}).done(function(g){var h=
g.replace(ja,"").match(qa),g=h?"<div "+ba+" "+h[1]+">"+h[2]+"</div>":g;oa.test(g)&&(g="<div "+W+">"+g+"</div>");g=a(g);d?(g=y(g,"["+W+'="'+d+'"]'),0===g.length&&e(ca,[b,d]),g=g.eq(0)):(h=y(g,"["+J+"]"),c.settings.scene.autoCreateMainContainer&&0===h.length&&(h=y(g,"main")),0<h.length&&(g=h.eq(0),g.attr(J,J)));if(1<g.length||!a(g).is("["+J+"],["+W+"]")&&!g.is("["+ba+"]"))g=a("<div "+W+"></div>").append(g);m(g);f.resolve(g.children())}).fail(function(a){f.reject(a)});return f}function H(b,d){var e;
if(v(b))e=E(b,d);else{e=c.async.deferred();var f;f=null==b?a.parseHTML(na):c.u.obj.isJQueryObject(b)?b[0]:b;e.resolve(f)}return e.promise()}function F(){}function G(c,b){null==c&&(c=a("<div></div>").get(0));a(c).is("["+Z+"]")&&e(D);b?a(c).is(":not(["+J+"])")&&a(c).attr(J,J):a(c).is(":not(["+W+"])")&&a(c).attr(W,W);var d=ha.controllerInternal(c,sa,{isMain:b},{async:!1});a(c).attr(Z,Z);return d}function N(){la||(la=!0,f())}function O(a){return c.core.controllerManager.getControllers(a||document.body,
{name:sa.__name,deep:!0})}function S(a){if(null==a)return null;var c=null,b=null;v(a)?c=a:b=a;a=O(b);if(0===a.length)return null;if(c){for(b=0;b<a.length;b++)if(a[b]._containerName===c)return a[b];return null}return a[0]}var Q="data-h5-controller",X="data-h5-dyn-controller-bound",V="data-h5-default-scene",$="data-h5-scene",W="data-h5-container",J="data-h5-main-container",Z="data-h5-dyn-container-bound",ba="data-h5-dyn-dummy-body",fa="__h5__RMI",da="__h5__RMI_Result",w=1E5,M=100001,ca=100002,D=100008,
ga=ha.isDisposing,la=!1,ka={__name:"h5.scene.DummyController"};c.mixin.eventDispatcher.mix(p.prototype);a.extend(p.prototype,{send:function(a){this._closed?alert("クローズ済みのチャネルです。送信できません。"):(a=new g(this.type,a),this._targetWindow.postMessage(c.u.obj.serialize(a),location.origin))},subscribe:function(a,c){this._subscribers.push({func:a,thisObj:c?c:null})},close:function(){this._closed=!0;this.off(window,"message",this._recv)},_receiveMessage:function(a){var b;try{if(b=c.u.obj.deserialize(a.data),b.type!==
this.type)return}catch(d){return}for(var a=this._subscribers,e=0,f=a.length;e<f;e++){var g=a[e];g.func.call(g.thisObj,b.data)}this.dispatchEvent({type:"message",data:b.data})}});var pa={};a.extend(A.prototype,{_receive:function(a){var b=c.core.controllerManager.getControllers(document.body)[0],d=a.id,e=a.method,a=a.args;!b[e]||I(b[e])?this._callFunction(d,b,e,a):this._sendChannel.send({id:d,isAsync:!1,status:4,result:null})},_callFunction:function(a,b,d,e){var e=P(e),f=void 0;try{f=b[d].apply(b,e)}catch(g){this._sendChannel.send({id:a,
isAsync:!1,status:1,result:null});return}var h=this;c.async.isPromise(f)?f.done(function(){var b=c.u.obj.argsToArray(arguments);h._sendChannel.send({id:a,isAsync:!0,status:2,result:b})}).fail(function(){var b=c.u.obj.argsToArray(arguments);h._sendChannel.send({id:a,isAsync:!0,status:3,result:b})}):this._sendChannel.send({id:a,isAsync:!1,status:0,result:f})}});a.extend(h.prototype,{invoke:function(a,b){var d=c.async.deferred(),e={id:this._invocationSeq.next(),method:a,args:b};this._invocationMap[e.id]=
d;this._sendChannel.send(e);return d.promise()},_receive:function(a){var c=a.id,b=this._invocationMap[c];if(b){delete this._invocationMap[c];var c=a.result,d=a.status;a.isAsync?2===d?b.resolve.apply(b,c):b.reject.apply(b,c):0===d?b.resolve(c):b.reject()}}});window.opener&&new A;a.extend(d.prototype,{navigate:function(a){ga(this.__controller)||this.__controller.trigger("sceneChangeRequest",a)},getParentSceneContainer:function(){if(ga(this.__controller))return null;var a=o(this.__controller.rootElement);
return!a?null:S(a)}});a.extend(j.prototype,{invoke:function(a,c){return this._rmi.invoke(a,c)},getControllerProxy:function(){return new b},setModal:function(a){this._isModal!=a&&(this._isModal?(this._parentBlocker.hide(),this._parentBlocker=null):this._parentBlocker=c.ui.indicator({target:"body",block:!0,message:"子ウィンドウを開いている間は操作できません。",showThrobber:!1}).show(),this._isModal=a)},close:function(){var a=c.async.deferred();this.window.close();return a.promise()},_watchChild:function(){var a=this,c=setInterval(function(){a.window.closed&&
(clearInterval(c),a.setModal(!1))},300)}});var ja=/<\!--(?:\s|\S)*?--\>/g,qa=/<body\b([^>]*)>((?:\s|\S)*?)(?:<\/body\s*>|<\/html\s*>|$)/i,oa=/^\s*(?!\s|<)/,na='<div class="h5-scene"></div>',s={};a.extend(F.prototype,{onChange:function(b,d){var e=c.async.deferred();a(b).empty();a(d).appendTo(b);e.resolve();return e.promise()},onChangeStart:function(a){this._ind=c.ui.indicator({target:a,block:!0,message:"遷移中..."}).show()},onChangeEnd:function(){this._ind.hide()}});s["default"]=F;var L=null,ma=/Controller$/,
sa={__name:"h5.scene.SceneContainerController",isMain:!1,_transition:null,_currentController:null,_isClickjackEnabled:!1,_dfd:null,_isNavigated:!1,_notPushState:!0,__init:function(c){var b=this.rootElement,d=this;(this.isMain=!!(c.args||{}).isMain)&&L&&e(100003);this._transition=this._createTransition();this._transition.onChangeStart(b);this._containerName=a(b).attr(J)||a(b).attr(W);this._currentController=null;m(b);this.on("{rootElement}","sceneChangeRequest",this.own(this._onSceneChangeRequest));
var f;if(this.isMain){L=this;this.on("{window}","popstate",this.own(this._onWindowPopstate));if(this._isClickjackEnabled)this.on("{a}","click",this.own(this._onAClick));f=void 0}B(b,null,f).done(function(a){d._currentController=a;d._transition.onChangeEnd(d.rootElement,null,b);d._transition=null})},__dispose:function(){ga(this._currentController)||this._currentController.dispose();this._currentController=null;a(this.rootElement).empty()},_onAClick:function(a){a.event.preventDefault();this.changeScene(a.event.originalEvent.target.href)},
_onWindowPopstate:function(){this._changeScene(location.href)},_onSceneChangeRequest:function(a){a.event.stopPropagation();setTimeout(this.own(function(){this.changeScene(a.evArg)}),0)},changeScene:function(b){if(v(b))return this.changeScene({to:b});var b=a.extend(!0,{},b),d=b.to;this._transition=this._createTransition(b.transition);this._transition.onChangeStart(this.rootElement,(this._currentController||{}).rootElement);var f=this._dfd=c.async.deferred();this._isNavigated=!0;if(this.isMain){ma.test(d)||
delete b.to;v(d)||e(100004,[d]);-1!==d.indexOf("#")&&e(100005,[d]);ma.test(d)&&e(100006,[d]);var g=ia(d);history.pushState(null,null,g)}this._changeScene(d,c.u.obj.deserialize(c.u.obj.serialize(b)));return f.promise()},_changeScene:function(b,c){var c=c||{},d=(this._currentController||{}).rootElement;this._isNavigated||(this._transition=this._createTransition(c.transition),this._transition.onChangeStart(this.rootElement,d));d&&k(d);var f=this;v(b)&&(ma.test(b)?x(b,a("<div></div>"),c.args).done(function(a){f._onLoadController(a,
d)}):H(b,!this.isMain?c.container:null).done(function(b){B(a("<div></div>").append(b),null,c.args).done(function(a){f._onLoadController(a,d)})}).fail(function(a){e(100009,[b],a)}))},_createTransition:function(a){var b=s[null!=a?a:"default"];b||e(100007,[a]);return new b},_onLoadController:function(b,c){var d=this,e=b.rootElement;this._transition.onChange(this.rootElement,e).done(function(){this._dfd&&this._dfd.resolve({from:c,to:e});c&&a(c).remove();d._currentController=b;d._transition.onChangeEnd(d.rootElement,
c,e);d._isNavigated=!1;d._dfd=null;d._transition=null})}};ha.addControllerInstantiationHook(function(a){a.scene=new d(a)});c.settings.scene=c.settings.scene||{};a(function(){c.settings.scene.autoInit&&N()});c.u.obj.expose("h5.scene",{openWindow:function(a,b,d,e){var f=c.async.deferred(),g=new j(a,b,d,e);setTimeout(function(){f.resolve(g)},100);return f.promise()},createSceneContainer:G,init:N,getMainContainer:function(){return L},scan:f,getAllSceneContainers:O,getSceneContainer:S})})()})(jQuery);